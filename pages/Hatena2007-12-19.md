---
title: "Hatena2007-12-19"
---

hatena

```
<body>
*1198024508*ねむい
目を覚ますために入ったお風呂で寝てしまった

*1198028818*遅刻

半蔵門線のダイヤが乱れていたので遅刻の連絡を入れようと思ったら携帯自体を忘れていてしょんぼり。

*1198032086*けいはんな
>>
jbking 2007/12/18 16:07 
「けいはんな」を初めて漢字で見た。
<<

「けいはんな」ってひらがなで書くと国立国会図書館やATRのある周辺という(勝手な)イメージが。
本当は京阪神と言いたいところだったのだけど、神戸より奈良の方が関係者が多そうなイメージが。

*1198035386*MediaWiki
すごい高機能だなぁ

「最近更新されたページ」がRSSを吐くとか
http://ja.doukaku.org/wiki/index.php/%E7%89%B9%E5%88%A5:Recentchanges

アクセス統計が付いているとか
http://ja.doukaku.org/wiki/index.php/%E7%89%B9%E5%88%A5:Statistics

あと「カテゴリ一覧」が空っぽで「カテゴリ未導入のページ」に全部入っていたので、1000speakersっていう名前空間を導入したのは間違いでカテゴリを導入すべきなのかもしれない。

ブレッドクラムhttp://developer.mozilla.org/ja/docs/MDC:MediaWiki_Extensions

*1198039413*優先順位の逆転
優先順位の逆転 - Wikipedia http://ja.wikipedia.org/wiki/%E5%84%AA%E5%85%88%E9%A0%86%E4%BD%8D%E3%81%AE%E9%80%86%E8%BB%A2
優先度継承 - Wikipedia http://ja.wikipedia.org/wiki/%E5%84%AA%E5%85%88%E5%BA%A6%E7%B6%99%E6%89%BF
優先度上限プロトコル - Wikipedia http://ja.wikipedia.org/wiki/%E5%84%AA%E5%85%88%E5%BA%A6%E4%B8%8A%E9%99%90%E3%83%97%E3%83%AD%E3%83%88%E3%82%B3%E3%83%AB

>>
火星探査船「マーズ・パスファインダー」で発生した問題は、リアルタイムシステムでの優先順位の逆転が引き起こした典型的な例である
<<

なるほど、たとえば僕のマシンが常時起動で10分に1回どこかのサーバになんかの情報を読み出してを送り、その定時報告が20分間途絶えたらマシンがハングしているという旨を僕の携帯に送るようにしたとする、と。でこの報告の送信タスクXは一番高い優先度にしてあるとする。それとは別にマシンがアイドル状態の時になんかの計算をして結果を書き出すようなプログラムYを走らせていたとする。これは低い優先度で走らせてある。で、DVDを見るのは中くらいの優先度だとする。
そうすると、たまたま僕が「DVDでも見るか」と思った瞬間が、まさにYが計算を完了して結果の書き出しをしようとロックをかけた瞬間だったとすると、Yが情報を書き出すのよりもDVDの再生のほうが優先されてしまう。そして優先度の高いXが情報を読み出すためのロックを獲得できずにブロックされる。結果としてDVDを見ているとなぜか携帯に「マシンがハングアップしています」というメールが届くことになる。
この例では単に「ハングしていないのにハングしたというメールが届く」というだけですむけども、マーズ・パスファインダーのような「ハングしたときに人間がリセットできないシステム」は万が一のために「ウォッチドッグタイマ」という「定時報告がなかったらリセットする仕組み」をつんであるらしく、もし僕のパソコンにそれが入っていたとしたら「DVDを見ていたらなぜかリセットされて計算結果も全部パー」という悲しいことになるわけか。

ウォッチドッグタイマー - Wikipedia http://ja.wikipedia.org/wiki/%E3%82%A6%E3%82%A9%E3%83%83%E3%83%81%E3%83%89%E3%83%83%E3%82%B0%E3%82%BF%E3%82%A4%E3%83%9E

マルチタスクって難しいなぁーー。

*1198068411*MyMiniCity
人が訪問すると街が育っていくサイト
http://nishio.myminicity.com/
早速作ってみた。

しかし、編集機能はないのか？
たまったポイントで建設ができるとか、何かクリエイティブなことができないと僕は面白くない。

----

今は家が1軒建っているだけ。@21:47

----

変化がないので早くも飽きた。

IMGタグに仕込んでみた(ぉ

# 無意味なので消した

----

いま1823位@22:00
当たり前だけどもF5連打しても増えない感じ。Cookieに入ってるのはどうもGoogleAnalyticsのだけっぽいね。ってことはIPアドレスで判定しているのかなー。
amachangは「FlashだからSharedObjectかも」って言っていたけど、僕がこれを作るとしたらFlashじゃなくてもっと低いレイヤーでカウントするかなぁ。

----

今1109位@22:31
IEで開いてみても増えないところから、IPベースで判断しているだろうと思ってPythonでプロキシを切り替えながらアクセスするプログラムを書いたけどうまくいかない。

----

Application Data\Macromedia\Flash Player\#SharedObjectsの中にそれらしきものがない。

----

プロキシをセットしてIEでアクセスしてみたらちゃんと2人に増えた。なのでページではない何かへのアクセスをIPベースでフィルタリングをしながら数えているのだと思う。でもFlashへのアクセスじゃないと思うんだな。なぜかというとFlashのURLはhttp://data.myminicity.com/swf/client.swfだから。

*1198088955*と、とりあえず
今日こそは早めの時間に寝るんだからね１！

*1198089248*call/cc
to id:amachang
今日の「最初の1回は必ず続きが実行されてしまうのか」って話だけども(if x (f x) x)って感じにして最初のxをcall/ccにして#fを返す関数を渡してやれば「続きが実行されてしまう」けど、fは呼ばれないよね。実質的な処理がfの中にあるのなら実質的にはやりたかった「続きを実行せずに終了」に近いんじゃないだろうか。

引数が#fにもなりうる場合ってのはどうするのがScheme的なんだろうか。僕だったら'(arg)って感じに包んでやって、使うときには(car x)してから使うようにするかな。
</body>
<comments>
<comment>
<username>よう</username>
<body>マルチタスクというかリアルタイムの問題ですね。<br>この例だとＤＶＤの再生というタスクがＩＯ待ちになると、優先度の低いタスクＹが実行されるので、ＤＶＤの再生が終わるまでタスクＸが実行されないということは起こらないでしょう。<br>リアルタイムのタスク管理の難しさは時間制約の厳しさにあります。<br>この例だとあまり伝わり難いかも知れませんね。</body>
<timestamp>1198057227</timestamp>
</comment>
</comments>
```


[はてなダイアリー 2007-12-19](https://nishiohirokazu.hatenadiary.org/archive/2007/12/19)