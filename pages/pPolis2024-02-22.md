---
title: "pPolis2024-02-22"
---

[[pPolis]]
[[EC2でPolis]]

<img src='https://scrapbox.io/api/pages/nishio/nishio/icon' alt='nishio.icon' height="19.5"/>下記は前任者のメモです。私はこのサービスを引き継ぎました。何もわかりません。解説して
<img src='https://scrapbox.io/api/pages/nishio/gpt/icon' alt='gpt.icon' height="19.5"/>このメモは、Amazon EC2上にPolisというオープンソースのAIを用いたフィードバックプラットフォームをセットアップする過程を記述したものです。Polisは大規模でオープンエンドのフィードバックを集め、分析するためのツールです。以下、メモの内容を要約して解説します。
- セットアップの概要
    - インスタンスの作成: Amazon EC2でUbuntuをOSに選択し、t2.mediumタイプ、8GBのストレージを持つインスタンスを作成します。
    - Dockerのインストール: PolisはDocker上で動作するため、UbuntuにDockerをインストールします。
    - Polisのインストール: GitHubからPolisのリポジトリをクローンし、環境設定ファイルをコピーしてビルドを開始します。ビルド中にDockerデーモンへのアクセス権限問題が発生した場合は、ユーザーをDockerグループに追加することで解決します。
- 詳細な過程
    - インスタンス作成時のエラー: 初めにt2.microインスタンスで試みたものの、ビルドに時間がかかりすぎることが判明し、t2.mediumに変更しました。
    - SSL証明書: Polisをインターネット上で安全に公開するためにはSSL証明書が必要です。デフォルトでは安全でない自己署名の証明書が使用されますが、運用環境ではLet's Encryptなどを利用して正規の証明書を取得する必要があります。
    - ドメインの認証問題: Polisを外部公開する際には、設定ファイルでドメインを正しく指定する必要があります。未認証のドメインを使用しようとするとエラーが発生します。
    - セキュリティルール: EC2のセキュリティルールでHTTP通信を可能にするためには、ポート80を開放する必要があります。証明書の取得時には、Polisサーバーを停止してポート80を空ける必要があります。
    - SSL証明書の設定: SSL証明書を取得した後、Nginxの設定ファイルを編集して証明書を適用します。証明書の自動更新を考慮すると、証明書のファイルを直接コピーするよりも、Certbotなどのツールを使用して自動的に更新されるように設定する方が良いです。
    - 運用中の問題: 開発サーバーを本番環境として使用しているため、アクセスが集中するとシステムが応答しなくなる可能性があります。ログを確認して問題の原因を特定することが重要です。
    - UIと機能に関するフィードバック: ユーザーインターフェースが同じであるために混乱が生じたり、Twitter連携が設定されていなかったりする問題が指摘されています。また、意見投稿が匿名でできることや、過去に投票した内容を追跡できない点についても言及されています。
このメモは、Polisのセットアップと運用に関連する一連のステップと、遭遇した問題及びその解決策を詳細に記録したものです。これらの情報は、将来的に同様のプラットフォームを設定する際の参考となるでしょう。
