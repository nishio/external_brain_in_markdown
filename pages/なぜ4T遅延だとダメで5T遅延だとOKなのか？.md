---
title: "なぜ4T遅延だとダメで5T遅延だとOKなのか？"
---

final answer
- ![image](https://gyazo.com/fc3a742e76230062f9cd5d3905635191/thumb/1000)

-----
from [[収納数を調整できる自動仕分け機draft]]
なぜ4T遅延だとダメで5T遅延だとOKなのか？
9/5
なぜ4T遅延だとダメで5T遅延だとOKなのか？
リピータ5T遅延+トーチ1T遅延+トーチ反転5T遅延相当
- 可能性1
    - ドロッパーオンから2T後にホッパー1に入る、4Tごとに2, 3と移動して3に入ったタイミングで上ホッパーが止まる
        - ![image](https://gyazo.com/35abb9faa17a98bddfd5e9988ba8faee/thumb/1000)
        - 1T早いと吸われてしまう
        - この解釈はホッパーがオンになった時に即座に吸う想定
            - だが[[よくわからない結果になった実験メモ]]はそれを否定してる
            - だがこの実験を肯定すると仕分け機が5Tクロックで動くはずがないので、何か気付いてない違いがあるのかも
謎
- [[ドロッパーもホッパーも1ティックで動く]]
9/8 謎は解けた
- [https://twitter.com/nishio/status/1435426297279234048?s=21](https://twitter.com/nishio/status/1435426297279234048?s=21)
- > トーチでオンにされたドロッパーはシグナルを周りに伝搬するので隣のホッパーが一時的に止まるのが原因
完全に理解した
- 5Tの遅延で正しく動く時の流れ
    - ![image](https://gyazo.com/fc3a742e76230062f9cd5d3905635191/thumb/1000)
    - ドロッパーが隣のホッパー1を止めてしまうため、オフになるまでホッパー2に流れない
    - ホッパー3に到達した時には4が止まってるので、再び4が動き出すまで待つ
    - 待ち時間が十分長いのでここにもチェストをつけて良い
- 4Tの遅延で正しく動かない時の流れ
    - ![image](https://gyazo.com/a19b51b4b7d3e842a619b31209b774bd/thumb/1000)
    - ホッパー3に到達したタイミングで4がまだ動いてるので吸ってしまう
    - そしてその次のティックで5に吸われる
    - 結果、すべてのアイテムが下段のチェストに入ってしまう
改めて整理すると
- ![image](https://gyazo.com/d90ce6af13428ce4787f1e6c42b96cca/thumb/1000)
- DLは流量制限を目的としたドロッパー
    - DLにはホッパーH4と同位相の5オン5オフシグナルを入れる
    - もしH1〜H3を伸ばすならホッパー1つにつき4T遅延するので、DLのクロックをその分早くする
- この位相合わせはとても重要
    - DLが1T早いと全部C3に入るようになる
- H3にはシグナルを入れない
- DEはドロッパーエレベータ、これは2オン2オフの速いクロックでも良い
- LCはラージチェスト
    - 速いアイテムエレベータで流し込んだものがここにバッファされる
    - ここに直接アイテムを入れても良い
        - 高さが低い場合はその方が手っ取り早い
    - アイテムエレベーターは後から拡張した時に付ければ良い
        - 拡張する方向は下
    - アイテムエレベーターに速いクロックを使う場合、バッファがなければたくさんものを入れた時にドロッパーがつまる
        - 底辺のドロッパーに1個しかものが入らないことを前提としてるエレベーターはアイテムを送り切らずに停止する
![image](https://gyazo.com/5c2727e36ab1c2b57cbdb95c7cd0e0ca/thumb/1000)
![image](https://gyazo.com/055dbf71f193b8b998449a49fe2a204a/thumb/1000)
![image](https://gyazo.com/e54cf34bafda37454baa8113ce73af15/thumb/1000)


要確認
- ドロッパーはパウダーでオンになった時でもホッパーを止めるのか？
    - そうでない場合は調整が必要
    - [https://scrapbox.io/files/613965d780613f001d7794b6.mp4](https://scrapbox.io/files/613965d780613f001d7794b6.mp4)

- 実験1 パウダー、ドロッパー、ホッパー、ホッパーでパウダーをON
    - ホッパーが止まるなら2つ目のホッパーには入らない


5階建
![image](https://gyazo.com/ad2c61af2efc724c933b9d09e7f37af9/thumb/1000)
![image](https://gyazo.com/6e7a0d9c54c1c831aa37c0f07417ff47/thumb/1000)
![image](https://gyazo.com/17aff6091eefa8705cee711c9b107620/thumb/1000)

さて、サバイバルで建築してみよう
どこに置こうかな、この家の壁にチェストを並べようかな
- ![image](https://gyazo.com/9a47f3c916e577e0c73781288b26e4ec/thumb/1000)

横に伸ばすのか後ろに伸ばすのかは少し迷ったが今回はインプットのチェストへのアクセスしやすさを考えて横に伸ばした。拡張したくなった時には後ろに伸ばす形に変更するかも。
- ![image](https://gyazo.com/522993e752c0143c51d862cca10c00ab/thumb/1000)

壁に並べたことで配線はちょっと大変。回りこめないので足場を上下する必要がある。できなくはない。
- ![image](https://gyazo.com/e465af1433d85fde8ea2133afc9e72b1/thumb/1000)

出来上がったので古い自動仕分け機の中身を移していたのだが、流石に12チェストあったものを5チェストに入れるのは無理があった。下に2チェスト拡張する。
- ![image](https://gyazo.com/3cd6c63d90e4b47d40135f1df646395b/thumb/1000)

古い自動仕分け機の解体が終わった。
![image](https://gyazo.com/d5022f06d57ad4fa5de3c6743e6319e6/thumb/1000)

空のホッパーに信号が入るとカチカチうるさい問題、ここにスイッチをつけたら解決。
- ![image](https://gyazo.com/6fb5e4fd5affda922b56d007b851fabc/thumb/1000)

チェストを整理して、野菜がやはり多い。自動農場からホッパーで自動仕分け機まで輸送してたのだけど、そもそもこちらに運んで来ないで農場周辺で仕分けてその辺の農民に売却する方が良いような気がする。
![image](https://gyazo.com/cd234c1b00b02965e7954ce2380c50f3/thumb/1000)
