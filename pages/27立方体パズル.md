---
title: "27立方体パズル"
---

物理[[パズル]]
![image](https://gyazo.com/ea26a368afa7c5c19df7448006231a57/thumb/1000)
- 穴の開いた木材でできており、穴の中をゴム紐が通っている
- 多くて4分岐しかせず、だいたいが2分岐以下なので落ち着いて読めば難しくない
- メーカーはFlidolinだが他のメーカーからも出てると思う

- 3-3-3-3 - 2-2-2 - 3-3 - 2-2 - 3-2-3-2 - 2-3

- 最初の2つの3はX, Yだとしても一般性を失わない
- 次の3はXとZの2通りがある
    - Xの場合、次の3がYだとぶつかるのでZに確定
    - ![image](https://gyazo.com/9881ecfbbc71f6f59372be099edc1107/thumb/1000)
    - 次の2はXとYのどちらでもありえる、その次もそれぞれ2通りある
        - YでZの時
            - 次の2で中央に行くと次の3が収まらないので、外周に走って3,3まで確定
            - ![image](https://gyazo.com/acfb275e85656ab52f5a04b8c1e5e0c0/thumb/1000)
            - しかし1F部分の空白スペースの末端が2になる
            - これでは最終的に3を入れることができないのでNG
        - YでXの時
            - 次の2をどっちに回しても次の3が入らないのでNG
        - よって次はXに確定、その次がYの場合2F部分に「末端が2」が再発してNGなのでZに確定
    - よってX-Z、次の2はX方向にしか入らない、そして3-3が入るスペースが1通りしかない
        - ![image](https://gyazo.com/8f48cf84d3891883487ea1a2aadcaf3a/thumb/1000)
    - 次の2をYにするとまた「末端が2」が1Fに発生するのでZしかない(写真はすでにZになってる)
    - 次の2をXにするとその次の3が入らないのでYしかない、すると次の3-2-3はZ-X-Zしかありえない
        - ここが重要なポイントで、論理で考えている人にとっては「こうしかありえないな」とスムーズに通れるのだけど、考えずに物理的にガチャガチャ動かしているだけの人は「コの字の中にブロックを差し込む」が物理的に難しいせいでなかなか進めない
    - このステップを超えるとあとは簡単
        - ![image](https://gyazo.com/733ba66303d6b727ded16d16408bbc43/thumb/1000)
        - 残りの2-2-3はY-X-Yしかありえない。終了。
- 3番目の3がZの場合、次の3はXでもYでもありえる(X-Y-Z)
    - まあこの確定の遅れを嫌って先に3番目の3がXの場合を探索して答えが出ちゃってるんだけど、一応どっちを選ぶかは運なのでこっちを選んだと仮定して読んでみよう
    - Xの場合、次の2はZとYの可能性がある(X-Y-Z-X)
        - Zの場合、次の2がYだと「末端が2」なのでXに確定
            - そうすると次の2が一択で中心に来て、その次の3が入らない、NG
        - Yの場合、次の2はXかZ
            - Xの場合
                - 次の2がZなら「中心に来て3が入らない」
                - Yでも最初の3にぶつかるので入らない、NG
            - よってZ
            - この場合、次の2に3通りの選択肢があるが、その次の3が入るのはYマイナス方向のみ
            - すると次の3も確定するのだが、その次の3が入らない、NG
            - ![image](https://gyazo.com/c4455fb4f707ab77471ab4473ecfe18c/thumb/1000)
        - よってX-Y-Z-XはNG
    - X-Y-Z-Yの場合、次の2はXかZ
        - Zの場合、その次の2がYだと「中心に来て3が入らない」のでX
            - その次の2がYだと「中心に来て3が入らない」のでZ
            - 3-3はY-Zに確定する
            - ![image](https://gyazo.com/6ed0718ac6c548442af4ccc535b67d0e/thumb/1000)
            - 次の2がYの時、その次の2はZだと「中心に来て3が入らない」のでX
                - しかし3を入れると確定で中心につながった2マスの空間が分離されてしまうのでNG
        - Xの場合、
            - (3-2-3をどう配置しても空間分離が起きるのでNGなのだが、まあ飛躍なく説明すると)
            - 次の2がYであるばあい、末端が2つできるのでNG
            - Zである場合、次の3-2-3の入れ方は1通りに確定するのだが、その結果
            - ![image](https://gyazo.com/0ac5628ff9eccf5d18cf3d209fa19b3a/thumb/1000)
            - 残りのブロックと、埋めるべき空間が分離してしまうのでNG
        - よってX-Y-Z-YもNG
    - よってX-Y-ZはNG

場合分けして順を追って考えていけばさほど大きな探索空間ではない。適当に動かしてると解のないところをグルグル回ったり運良く解のある小さい空間を選んで始めたりするだろう。
