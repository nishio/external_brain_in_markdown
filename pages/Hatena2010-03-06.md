
hatena

```
<body>
*1267849931*王への請願　一人プレイ第2回
さて、前回のプレイ(<a href='http://d.hatena.ne.jp/nishiohirokazu/20100305/1267798278'>王への請願</a>)でわかったことが一つある。農夫のダイス増加効果は下女や哲学者を取るのを妨害するので下女や哲学者を先にとろうとしたが、ダイスの数の差は終盤で圧倒的になってくる。終盤、ダイスがたくさんあっておおよそすべての目が出ていて、それを可能な限り揃えようとした場合のことを考えると、哲学者は最大2個のダイスを目標に揃えることができるのに対して、下女は1個だ。哲学者＞農夫＞下女か農夫＞哲学者＞下女じゃないだろうか。

第二回
** round 1
P1: ダイス3
[2, 4, 5]。5をリロールして1/2で哲学者。[4]。ふむ、農夫もしくは哲学者が得られる。僕はまだ今のところは農夫より哲学者だと思うんだよな。哲学者をゲット。
P1: 哲学者, 3


P2: ダイス3
[2, 6, 6]。哲学者を取れる。うーむ。哲学者と農夫のどちらがいいか考えるためにあえて農夫にするかな。
P2: 農夫, 3

**round 2
P1: 哲学者, 3
[5, 5, 5]。容赦なく衛兵。
P1: 哲学者, 衛兵, 3


P2: 農夫, 3+1
[1, 5, 6, 6]。1,5をリロール。[1, 6]。1をリロール。[3]。衛兵は2枚あるから取れる。合計が21だから証人を取ることもできる。しかしこっちはダイス増やすのを目指そう。
P2: 農夫, 衛兵, 4

**round 3
P1: 哲学者, 衛兵, 3
[1, 1, 3]。衛兵で2。これは1を確定して残りをリロールすれば哲学者の効果で1/2の確率で天文学者、外れたら農夫、って流れだよな。リロール。[1, 4]。残念、天文学者ならず。1を確定してリロールしたらまだ1/6のチャンスはある。狩人にする手もあるけど。リロール。[4]。残念でした。農夫でいいです。
P1: 哲学者, 衛兵, 農夫, 4


P2: 農夫, 衛兵, 4+1
[3, 4, 4, 5, 6]。衛兵で2。2～6で魔術師を取れる。が、どうするかな。いや、取るべきか。
P2: 農夫, 衛兵, 魔術師, 6

**round 4
P1: 哲学者, 衛兵, 農夫, 4+1
[2, 2, 2, 3, 6]、衛兵で2。この時点で4個セット。天文学者かな。こちらはコントロール重視で。
P1: 哲学者, 衛兵, 農夫, 天文学者, 6


P2: 農夫, 衛兵, 魔術師, 6+1
[1, 1, 2, 3, 5, 5, 6]、衛兵で2。魔術師で1を4にして1～6を作って、錬金術師。
P2: 農夫, 衛兵, 魔術師, 錬金術師, 8

**round 5
P1: 哲学者, 衛兵, 農夫, 天文学者, 6+1
[1, 3, 3, 3, 4, 4, 5]。衛兵で2。もう魔術師も錬金術師も取られた後だ。序盤のコントロール性能とかは錬金術師を取られると軽くひっくり返るのでやはりダイスの増加を最優先にした方がいいのかも知れないな。いまさらダイス増加するか。哲学者で2,4を3,3にすれば、残り3個のリロールで1個でも3がでれば領主が取れる。その確率は1-(5/6)**6だから67%だな。リロール[2,3,5]。OK。
P1: 哲学者, 衛兵, 農夫, 天文学者, 領主, 8


P2: 農夫, 衛兵, 魔術師, 錬金術師, 8+1
[2, 3, 3, 4, 4, 5, 5, 5, 6]。衛兵で2。さてどうしたものかね。王をとりに行けば取れると思う。P1は領主を取ったのでこのターンでダイス増加カードをとっても、毎ターン1個ずつ追いつかれる。となるとまだリードしている今のうちに勝負を決めに行った方がいいのかな。
[2, 2, 3, 3, 4, 4, 5, 5, 5, 6]。一番多いのは5だが超えている値が6の1個だけだからこれをゴールにするのはうまくない。4にしよう。錬金術師の効果で2,5,5を4,4,4にして4を確定。
[2, 3, 3, 4, 4, 4, 4, 4, 5, 6]。5枚をリロール。[1, 2, 4, 4, 4]。チートだ(笑)。4を確定してリロール。[2, 6]。片方を魔術師の効果で4にして残り一つをリロール。[1]
[1, 4, 4, 4, 4, 4, 4, 4, 4, 4] 4が9個。国王獲得。
P2: 農夫, 衛兵, 魔術師, 錬金術師, 国王, 王妃, 10

**round 6
P1: 哲学者, 衛兵, 農夫, 天文学者, 領主, 8+1+2
ダイスが一気に増えた。11個だ。
[1, 1, 1, 1, 2, 3, 3, 4, 5, 5, 6]。衛兵で2。1が4つあるなぁ。1で10個を目指すか？しかしそれでは哲学者が有効活用できない。5だな。5で9個を目指そう。5をロックしてリロール。
[1, 2, 3, 3, 4, 6, 6, 6, 6, 6]。ぐは。4,6を哲学者の効果で5,5に変更して確定。残り8個をリロール。
[1, 3, 4, 4, 4, 5, 6, 6]。5を確定して残り7個をリロール。
[1, 1, 3, 3, 5, 5, 6]。5を確定して残り5個をリロール。
[1, 1, 2, 3, 6]。天文学者の効果で5を作ってそれを確定、残り4つをリロール。
[1, 4, 5, 6]。OK、これで5が9個になった。残りもせっかくだからリロール。[1, 3, 3]。[5, 6]。[1]。
最終的に、5が10個になった。国王奪取。
P1: 哲学者, 衛兵, 農夫, 天文学者, 領主, 国王, 12


P2: 農夫, 衛兵, 魔術師, 錬金術師, 王妃, 10+1
うーん、まあ5を10個集めればいいのか。たぶん出来るだろう。
[1, 1, 1, 1, 2, 2, 2, 3, 3, 6, 6]。これはまた端が多いなぁ。もったいないけど1の事はあきらめて2に集めるか。衛兵もあるし。8個リロール。
[2, 3, 4, 4, 4, 4, 5, 5]。2をロックしてリロール。
[4, 4, 4, 4, 4, 5, 6]。衛兵で2を追加してそれをロック。今5個。
[1, 2, 3, 3, 4, 6, 6]。2をロックしてリロール。
[2, 3, 4, 4, 6, 6]。2をロックしてリロール。
[1, 2, 5, 5, 6]。2をロックしてリロール。
[3, 3, 4, 5]。いま8個であと3個作れば奪還できるんだな。じゃあ、魔術師で3を1に変更。王妃で1を追加。錬金術師で1,1,4を2,2,2に変更。これで11個。残り2個をリロール。[2, 2]。チートだろ(笑)
最終的に2が13個になった。国王奪還。
P2: 農夫, 衛兵, 魔術師, 錬金術師, 王妃, 13

** round 7
終りだと思うけどあえて続けてみる。
P1: 哲学者, 衛兵, 農夫, 天文学者, 領主, 12+1+2
[1, 2, 2, 2, 3, 3, 3, 3, 4, 5, 5, 5, 5, 6, 6]。衛兵で2。5をロックしてリロール。今4個。
[1, 1, 2, 2, 2, 3, 4, 5, 5, 5, 5, 6]。5をロックしてリロール。今8個。
[2, 2, 2, 3, 4, 4, 5, 6]。5をロックしてリロール。今9個。
[2, 3, 3, 3, 3, 6, 6]。天文学者で5に変えてロック。今10個。
[2, 2, 3, 5, 5, 6]。5をロックしてリロール。今12個。
[1, 2, 2, 5]。5をロックしてリロール。今13個。
[4, 4, 6]。きたきた。哲学者で4,6を5,5に変える。今15個。
[1]。終了。
さて、5が15個で国王奪取ということにする。
P1: 哲学者, 衛兵, 農夫, 天文学者, 領主, 16


P2: 農夫, 衛兵, 魔術師, 錬金術師, 王妃, 13+1
ふむ。ダイス数的な問題で15個揃えるのは厳しいぞ。衛兵と王妃で追加されてやっと16個だからな。
[2, 2, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6]。衛兵で2。5をロックしてリロール。今5個。
[2, 2, 2, 3, 3, 4, 5, 5, 6, 6]。錬金術師で3,6,6を5,5,5に変えてロック。今10個。
[1, 3, 4, 5, 5]。5をロックしてリロール。今12個。
[1, 5, 6]。5をロックしてリロール。今13個。
[2, 5]。5をロックしてリロール。今14個。
[5]。チートだ(笑) 王妃で5を追加してロック。16個。
5が16個になったので国王奪還。
P2: 農夫, 衛兵, 魔術師, 錬金術師, 王妃, 16

** round 8
P1: 哲学者, 衛兵, 農夫, 天文学者, 領主, 16+1+2
ダイスの数が圧倒的だ。
[1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 5, 5, 5, 6]。2で行こう。今5個。
[2, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 6, 6, 6]。今7個。
[1, 1, 1, 2, 3, 3, 4, 4, 5, 5, 6, 6]。今8個。
[1, 1, 3, 3, 4, 4, 4, 5, 6, 6, 6]。哲学者の効果で1,3を2,2に変更。今10個。
[1, 1, 1, 2, 2, 3, 3, 5, 6]。今12個。
[1, 1, 2, 3, 4, 5, 6]。今13個。
[2, 2, 2, 4, 6, 6]。今16個。
[3, 4, 6]。衛兵で2を追加して今17個。
[2, 2, 5]。天文学者で5を2に変えて終了。今20個。
2が20個で国王奪取。
P1: 哲学者, 衛兵, 農夫, 天文学者, 領主, 国王, 20


P2: 農夫, 衛兵, 魔術師, 錬金術師, 王妃, 16+1
物理的に20個は無理だ(笑)
終了。

** 最後に

もう飽きた。

*1267851705*王への請願シミュレーション
出目のコントロールが全くない状態で、ダイスがn個の時、平均いくつの連を作ることが出来るか。
>||
3 1.8281
4 2.419
5 3.0692
6 3.7438
7 4.5061
8 5.2729
9 6.1047
10 6.9652
11 7.8432
12 8.7563
13 9.6634
14 10.6325
15 11.5703
16 12.5577
17 13.527
18 14.4711
19 15.4639
||<
というわけでダイスを追加するカードは序盤ですら+0.6の期待値上昇効果をもたらす。しかも毎ターンもたらす。ダイスの出目コントロールは購入によって即座に期待値上昇効果があるが、せいぜい+3がいいところである。

初手で80%の確率で農夫を取れるし、農夫をとってダイスが4つになったらリロールナシでも44%の確率で合計が15以上になるし、衛兵が取れる確率も4倍になる。このあたりのダイス増加カードはもれなく押さえることが大前提のゲームになりそうだ。

以下ソースコード
>|python|
from random import choice

NUM_TRIAL = 10000
DICE = range(6)

def test(NUM_DICE):
    sum = 0
    for _trial in range(NUM_TRIAL):
        dice = [choice(DICE) for _i in range(NUM_DICE)]
        counts = [dice.count(d) for d in DICE]
        counts.sort()
        most = counts[-1]
        score = most
        num_dice = NUM_DICE - most

        while num_dice:
            dice = [choice(DICE) for _i in range(num_dice)]
            v = dice.count(0) # WLOG
            if v == 0:
                score += 0
                num_dice -= 1
            else:
                score += v
                num_dice -= v

        sum += score

    print float(sum) / NUM_TRIAL

for i in range(3, 20):
    print i,
    test(i)
||<
</body>
```


[はてなダイアリー 2010-03-06](https://nishiohirokazu.hatenadiary.org/archive/2010/03/06)