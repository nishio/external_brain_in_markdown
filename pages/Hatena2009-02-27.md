---
title: "Hatena2009-02-27"
---

hatena

```
<body>
*1235687453*ZumoDrive続編
>||
$ cd /Volumes/ZumoDrive/
$ ls
ls: .: Device not configured
||<

なんか/Volume/ZumoDrive1/ってのができている。むう。Emacsでファイルを編集して上書き保存しようとしたら「そんなパスはない」って言われるからファイルが消えてなくなったのかと思って驚いたけどパスが変わっただけか。
Dropboxのほうがよかったのかなぁ。どっちもそんなに使っていないのだけど。

*1235688406*引っ越し当日！
後8時間！


引っ越し代金の31500円を封筒に入れて棚においていたが、このまま代金ごと段ボールに詰めてしまうとか非常にありがちなので移動しておく。


洗濯をすると濡れたものをどうするか問題が発生する(というかハンガーは箱のなかだ)ので引っ越しが終わるまで洗濯しない。


明らかに終わらない気配。洗濯機、冷蔵庫、机、あたりが輸送できることが最優先。
f:id:nishiohirokazu:20090227080552j:image
ろうかを荷物を持って通れるようにする必要がある。
f:id:nishiohirokazu:20090227080653j:image


f:id:nishiohirokazu:20090227090901j:image
逆の視点から
f:id:nishiohirokazu:20090227094613j:image
「ちらかってるだろ、あと6時間なんだぜ、それ…」


節水シャワーヘッドを付け替えたら間違えてアジャスターを外さずにオリジナルのヘッドをつけてしまって付きもせず離れもせずという状態になってしまって焦った。ガムテープを3重に巻いてグリップ力を高めた上でラジオペンチでひねったらなんとかなった。


今天気予報を見たら最高4度ととても寒い上に雨がやまないことが判明。むー、自転車で運ぶのは難しいか。


>||
片付かない、部

　　　　　　第
　　　　　　参
屋　　　　　話
||<


うわー、雪だー。


スーパーで段ボールを3つゲットした。これで少し楽になった。


机を解体した。


後７時間
f:id:nishiohirokazu:20090227105605j:image


大変だ。押し入れの奥から大きな段ボールに2箱の本が出てきた。
f:id:nishiohirokazu:20090227110403j:image
せっかく取ってきた3つの段ボールが瞬時になくなってしまった。また探しに行かなければ。


段ボールは見つからなかった。ううむ。
<img src="http://gyazo.com/9bc5151cc92cab9b62f2e2e22f53116a.png">
なるほど。詰めた本をもう一度出してひもでしばる。

しばる、しばるよ
f:id:nishiohirokazu:20090227132520j:image


引っ越し屋さんに貰った段ボール箱が1個残ってた！！


食器は割れないように箱に詰める時間コストが高いので明日かごに入れて自転車で運ぶという選択肢。


分解、分解
f:id:nishiohirokazu:20090227124153j:image



電磁調理器置き
f:id:nishiohirokazu:20090227140027j:image
この棚の教訓は「コンセントの前に棚を置くととてもつかいにくい」
f:id:nishiohirokazu:20090227142921j:image


解体完了
f:id:nishiohirokazu:20090227143522j:image


靴箱の中からバルサンがでてきた。買ったはいいものの片付けるのが面倒で…。新居にはすでにいくつか荷物があるしな…。
いや、まだ間に合う。キッチンとバスルームにはほとんどものが無いから荷物を運び込むときに居室の方に運び込んでもらって今日中にバルサンをすればいいんだな。


今気づいたんだが「可能な限り箱に入れる」はゴールが定量的に明確ではない。だから途中でだれたんだな。食器と浴室のものは箱に入れない、と決まってからは割と楽だった。途中で予定外の本が出現したときには困ったけど。


ふう。食器の片付けをやってもいいけど、疲れたのでいいや。早く引っ越し屋さんが来ないかな。待っている状態って何も着手できないから困る。


引っ越し中ナウ。
- 組み立て家具は組み立てた状態のままで部屋から出せるかどうか確認する
- なるべく同じ形の箱に入っている方がやりやすいのでひもでくくった本や家電も全部箱に入れられて行く
-- 家電はぷちぷちで包んでた
- 洗濯機は水を止めておく
- 無印を含めプラスチックケースはわれやすい。

新居にて
f:id:nishiohirokazu:20090227181619j:image
- 冷蔵庫をどこにおくか考えてなかった。
-- でも実質的に一つの角しか選択肢がないので後はどっち向きにおくかだけだ。
- 旧居には僕の身長より高いクローゼットがあったが新居にはない。
-- かわりに身長の半分の高さで区切られた押し入れが約二倍のサイズあるので収納は何も考えなくていいと思っていたけどいまハンガーに吊るしている服はどうするんだ自分。考えてなかった。
- ていうかせっかく寸法を測って方眼紙を切って作った図面をどの箱にしまったかわからないとかダメすぎる。
- カーテンがどの箱に入っているかわからないので寒い

18:46 引っ越し終わったー。


携帯のカメラでは画角が狭いので、箱だらけの圧迫感を伝えられない。
f:id:nishiohirokazu:20090227183701j:image
カーテンをつけてベッドにクッションをセットして、押し入れで寝るという最悪の事態は避けられた。


っと。くつろいでいる場合ではない。まだもう一つのタイムリミット「鍵の引き渡し」が残っている。タイムリミットまであと21時間。
情報を整理しよう。
- 新居
-- ものがたくさん。ただしどこに何があるのかはよくわからない。
-- 浴室に電球がない
-- バルサン(アースレッド)をたく準備をした
- 旧居
-- 食器が取り残されている(明日運ぶ予定)
-- かご1: ノートPCなどが詰まっている かご2: 空
-- まだお湯は出る。暖房もある。ただしカーテンがない。寒い。
-- 真ん中の部屋の照明が取り外されていない。いま部屋にある道具では僕では身長が届かない。
--- 一番合理的な解決はコンテナケースの中身を出していくつか持って行って足場にすること。
--- そのコンテナケースに食器を入れて戻ってくればいいんじゃない？
-- 掃除機とモップがある
- 僕
-- 外は雪が降るような気候の時に合計3時間板張りのドアのあいた部屋にいたので冷えている。お風呂に入りたい。
-- 今日は寒いので荷物を持って何往復もするのは避けたい。

よし、こういうシナリオはどうだ
- 空のコンテナケースに着替えとタオルを入れる
- 新居をアースレッドをたいてでる
- ココイチに行ってカレーを食べる。多分眠くなるのでほっこりする。本を持って行く。
- 旧居に行く。照明を外す。お湯を出して食器を洗ったりコンテナに詰めたりする。
- お風呂に入る。
- コンテナを1個持って新居に戻って来る。(出発から1～2時間以上経っていることを確認)
- 目覚ましをセットして寝る(目覚ましはどこだ？)
- 起きる。
- 照明や残りの食器を輸送する。


<hr>
- 今日せねばならないこと
-- ■ 冷蔵庫を空にする
-- ■ 洗濯機を空にする
-- ■ 机を運べる状態にする
-- ■ 可能な限り箱に入れる
-- 引っ越し 2009-02-27 16:00-18:00
-- □ バルサン
-- □ 燃えるゴミを出す
-- □ 箱に入らないものを自転車で輸送する
- 28日にしないと行けないこと
-- 午前中に電気とガスの停止の立ち会い
-- □ 食器の搬送
-- かばんにPCを入れておいて待機中の時間を無駄にしないでいいようにする
-- 16時、鍵を渡す(多分カーテンのなくなった古い部屋で待っていると寒いので新居で待つ)
-- 上野たん誕生会

- □ ガス、電気、水道開通
-- □ ガス
--- □ [2009-02-28 9:00]@ ガス 9-12にclose 立ち会い
--■ 水道
--□ 電気
--- □ [2009-02-28]@ 電気利用停止 28日午前中にメーターの確認に来る
--- □ 安定ブレーカーを切る

- □ 免許の住所変更
- □ 手帳に古い住所などの情報がいっぱい書かれているので近いうちにプリントアウトして差し替える。
- 引っ越しし忘れないようにチェックリスト
-- ■ 節水シャワーヘッドをもとのシャワーヘッドに付け替える
-- ■ カーテンを外す
-- ■ トイレットペーパー
-- □ 照明

*1235718430*Re: google app engine のユニコードの処理に苦しんだ方への処方箋
<a href='http://blog.story-fact.com/?eid=970842'>hikaliの開発日誌 | [Pythonゲーム修行]google app engine のユニコードの処理に苦しんだ方への処方箋</a>

とりあえず
>|python|
Python 2.5.2 (r252:60911, Nov 29 2008, 16:55:50) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> print "あ" + "い"
あい
||<
というわけで
>>
Pythonの内部では、マルチバイト文字列はUnicodeでないと処理できない。

　これも、知らないと結構はまるのですが（当然できるものと思い込んでいるため）、たとえば「+」を使って文字列を連結することもできません。
<<
というのは事実誤認。


それから
>|python|
>>> print u"あ" + "a" # (1)
あa
>>> print u"あ" + None # (2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: coercing to Unicode: need string or buffer, NoneType found
>>> print u"あ" + 1 # (3)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: coercing to Unicode: need string or buffer, int found
||<

(1)のように、ユニコード文字列にそうでない文字列を結合する際には、ユニコード文字列でない側をユニコード文字列に変換する。そこで例えば文字列やバッファーでないものが来た場合は「ユニコードに変換しようとしたけど文字列じゃないよこれ」ってエラーが出る。(2)では「文字列ではなくNoneTypeが来た」、(3)では「文字列ではなく整数が来た」とエラーメッセージに書いてある。


せっかく対話的シェルで簡単に試すことが出来るんだから、よくわからないことが起きたら小さい単位に砕いて挙動を確認してみると理解が進むのにな、と思った。

<hr>
追記: id:voluntas と「早くPython3000への移行が進めばいいのにねー」とか話していたんだけど、そうかせっかくだからその件についてもここに書いといた方がいいのか。上の(1)のコードは「デフォルトのエンコーディングを使ってバイト列をユニコード文字列に変換してから結合」という挙動をするわけだけど、けっこう多くの人がデフォルトエンコーディングがなんであるかとか、コードでfoo + barと書いたときにこの+で変換が怒るのかどうかとかに無自覚なのでバグの温床になる。そこでPython3000からは(1)もTypeErrorになるように変更になった。明示的に変換してから結合する習慣を付けること。
</body>
<comments>
<comment>
<username>単身引越に</username>
<body>ネットで探していてすごく安いし、よさそうな単身引越しの会社見つけたんで紹介します。引越ナビ.com（http://www.754navi.com/）っていうとこなんだけど格安なのにダンホールも無料だし保険もかかっていて同乗もokおそらく一番安いじゃないかと思いこの間友達にも紹介して好評だったので引越し考えている単身の人はおすすめだよ。</body>
<timestamp>1236010169</timestamp>
</comment>
<comment>
<username>paison</username>
<body>今更のコメントですがgoogle app engine限定の話だと思いますよ。<br>"pythonの"と言い切ってしまってるのは問題ですが、<br>"google app engineのpython"ではunicode型とstr型を連結するとエラーになるという話かと。</body>
<timestamp>1297258873</timestamp>
</comment>
<comment>
<username>nishiohirokazu</username>
<body>↑ろくに確かめもせずに間違ったことを言ってしまう人がいるということが問題だ、という話に間違ったことを書くとかジョークか何かですか？<br><br>GAEに限った話ではなくPython2.xではunicode型とstr型を連結するとstr型の方をデフォルトエンコーディングでunicodeに変換してからつなごうとするわけで、その際にデフォルトエンコーディングがasciiであり、asciiの範囲にないバイトが含まれているなら変換エラーになる、と。そんだけのこと。</body>
<timestamp>1297297226</timestamp>
</comment>
<comment>
<username>佐藤</username>
<body>Djangoで<br>def __unicode__(self):<br>   return self.[ForeignFieldのプロパティ]<br>って感じでやってしまって<br>Caught TypeError while rendering: coercing to Unicode: need string or buffer, *** found<br>ってでてたのが解決しました。ありがとうございます。</body>
<timestamp>1297837445</timestamp>
</comment>
</comments>
```


[はてなダイアリー 2009-02-27](https://nishiohirokazu.hatenadiary.org/archive/2009/02/27)