
hatena

```
<body>
*1421425021*彼との会話実験1
この記事の目的は実験ログを正確に共有することではなく、実験ログがコンテンツとして意外と面白いのではないかってのを検証するところなので、面白くない部分は削ったり、読みやすくなるように少し修正したりしています。

**実験1 2015/1/15 17:47

この会話で何が起きて欲しいですか？
>>> 記憶とは何なのかをもっと明確にしたい
その直前には何が起こりますか？
>>> 記憶の直前には新しい情報のインプットが起こる
その情報と、記憶とは同じですか？違いますか？
>>> 情報が元になっているけど、ちょっと加工されている
その情報は、どのあたりにありますか？
>>> 情報は自分の外にあって、読んだりして取り込むもの
そのものと自分の間には何がありますか？
>>> あえて言うならば、積極的な情報を取り入れようという姿勢
その情報の時、姿勢に何が起こりますか？
>>> 面白い情報に出会うと姿勢は積極的になるな
その積極は、どんな種類の積極ですか？
>>> もっとたくさんの情報を得たいという姿勢
その情報は、いくつありますか？
>>> 無数にある
その姿勢と、直前とは同じですか？違いますか？
>>> 「直前」は時間軸上の関係であってものじゃない
その関係は、どんな種類の関係ですか？


所見：直前の発言だけからキーワードを選んでいると話がどんどんずれていくので適宜話を元に戻す必要がある。

** 実験2 2015/1/15 18:39

この会話で何が起きて欲しいですか？
>>> 傾聴することについてもっと明確にしたい
その傾聴について、他に何かありますか？
>>> 聞くことで相手から情報を引き出すことができる
その情報について、他に何かありますか？
>>> 有用な情報とそうでない情報とがある。有用な情報を引き出したい。
それから何が起こりますか？
>>> 有用な情報を引き出すことができれば、自分の活動が改善される。
次に何が起こりますか？
>>> 自分の活動が改善されると、良い結果を出すことができて、良い評価が得られる。
その相手は、どれくらい遠いですか？
>>> まあ、常時そばにいる家族とかとは違って、話す時間は限られていると考えた方がいい
その情報と家族の間には何がありますか？
>>> 何もない
その情報は、いくつありますか？
>>> 情報は無数にある。
その有用は、どんな種類の有用ですか？
>>> 自分の活動の改善に役に立つような種類の有用。
その直前には何が起こりますか？
>>> 「なるほど、そういう手があったか」とか。
その役の時、評価に何が起こりますか？
>>> 役に立った時には、評価は上がる。
その改善は、どこにありますか？
>>> 改善はどこにあるかって言うと、あえて言うなら自分の心の中
そのことの時、相手に何が起こりますか？
>>> あえて聞かれてるのは「傾聴の結果、有用な情報が引き出せて、役に立って、評価が上がった時」だと解釈すると、その時相手には感謝して相手も他人の役に立ったという満足感を得るべき
その情報は、どれくらい遠いですか？
>>> おいおい、直前の発言に反応しろよ


所見：単純に出現した単語を蓄積していくと、だんだん直前の回答に含まれる単語が選ばれる確率が減って「こっちの話をちゃんと聞いてない」感が出てきた。

** 実験3 2015/1/15 18:58

この会話で何が起きて欲しいですか？
>>> 傾聴の明確化
それから何が起こりますか？
>>> 傾聴を支援するソフトウェアができる
その支援は、どのあたりにありますか？
>>> みんなのコンピュータに入っていつでも使える
そのコンピュータと傾聴の間には何がありますか？
>>> コンピュータを傾聴させることができるようにするプログラムと、傾聴とは何かっていうのの明確化がある
それから何が起こりますか？
>>> 今まで言語化ができないことが原因で知識の流通が妨げられていたようなケースで、よりよい知識の流通が起きるようになる
その傾聴は、どこから来るのですか？
>>> 知りたいという気持ち
そのみんなは、何のようですか？
>>> 会社などの組織のメンバー
その気持ちは、内側ですか？外側ですか？
>>> 内側
そのソフトウェアは、どれくらいの年ですか？
>>> 今動き始めたところだｗ
そのところについて、他に何かありますか？
>>> 動き始めたところだから、これから改善のために問題点と解決方法を見つけていかなきゃいけない
その方法は、何を着ていますか？
>>> 着てない
その解決は、内側ですか？外側ですか？
>>> うーん、中からくるけど、解決自体は中で完結しない。外の世界と結合して外の世界が変化することが解決だから、解決自体は外。
その世界は、どこにありますか？
>>> 外の世界は自分の外側、自分の周囲ぐるりにある
その直前には何が起こりますか？
>>> 世界の変化の直前には、変えるためのアクションがある
その結合は、どこにありますか？
>>> 中の世界と外の世界の結合は自分の境界線上にある
その自分は、いくつありますか？
>>> 1つ
その解決は、どこにありますか？


所見：「その」をつけるのは直前の発話に含まれたものだけにしたほうが良いのでは。

** 実験4 2015/1/16 18:03

この会話で何が起きて欲しいですか？
僕> 重複質問排除とNG質問判定と、質問ステージ判定を積んだのでテストしたい
彼> あなたはその質問をどう知るのですか？
僕> 質問はこのプログラムがコンソールに出すからわかる
彼> 排除は、何のようですか？
僕> ロジスティック回帰にしようと思ったんだけど、まずは簡単なものからってことで単なるブラックリスト
彼> 排除は、どんな種類の排除ですか？
僕> ユーザがNGと答えた質問と単語の対をリストに記録しておいて、同じものが出現したらキャンセルする
彼> その質問は、どんな種類の質問ですか？
僕> このプログラムが表示した質問
彼> その質問は、どこにありますか？
僕> コンソールに表示されてる
彼> 質問は、何のようですか？
僕> うーん、、詰まった時に揺さぶるみたいな感じかな
彼> 質問について、他に何かありますか？
僕> 質問をしてくれるプログラムが有益だと思っている
彼> コンソールは、どんな種類のコンソールですか？
僕> 一般的なコンピュータと人間のインターフェイス
彼> そのインターフェイスは、何のようですか？
僕> 今はチャットのようだけど、近いうちにこういうターン制的な動きは辞めたいと思っている。ユーザが返答にどれだけ悩んでいるかとかを入力時間やタイプの速度から判断したい。
彼> キャンセルは、どんな種類のキャンセルですか？
僕> 選択肢から外す。
彼> インターフェイスは、どこにありますか？
僕> 人間とコンピュータの間にある。
彼> そのコンピュータは、どんな種類のコンピュータですか？
僕> 普通のラップトップ。すごく性能の高いマシンが必要なプログラムだと、ユーザ個々人が手軽に使うことができなくなっちゃうから。
彼> インターフェイスについて、他に何かありますか？
僕> FacebookやTwitterみたいな、今のユーザが慣れ親しんでいるものに寄せていったほうがいいと思う。
彼> あなたはそのユーザをどう知るのですか？
僕> たぶん、クローズドベータテストを開催して、応募があった人に限定公開する感じ
彼> あなたはそのクローズドをどう知るのですか？
僕> 僕は主催する側だから知ってるけど、ユーザはどうやって知るかというと、まあ僕のFacebookやTwitterでの書き込みからかな
彼> そのユーザは、どんな種類のユーザですか？
僕> 最終的にはだれでも使えるものにしたいけども、当面はごく少数のフィードバックを返してくれるようなユーザがいいな
彼> そのユーザは、何のようですか？
僕> リトマス試験紙かな。
彼> そのリトマスについて、他に何かありますか？
僕> いや、もっと詳細にフィードバックを返してくれないと困るか
彼> Twitterは、何のようですか？
僕> Twitterは短い文章を投稿できるひとりごとの場
彼> そのTwitterは、どんな種類のTwitterですか？
僕> いわゆるSNSね
彼> あなたはそのSNSをどう知るのですか？
僕> 自然と。
彼> Twitterは、どこにありますか？
僕> インターネット上
彼> Facebookについて、他に何かありますか？
僕> FacebookもSNSの一種で、インターネット上にある
彼> そのインターネットについて、他に何かありますか？
僕> ユーザがそれを介してつながりあっている
彼> Facebookは、どこにありますか？
僕> インターネット上だよ
彼> フィードバックは、何のようですか？
僕> プログラムを育てる糧だね。
彼> その糧について、他に何かありますか？
僕> どこを改善する必要がある家が明確化される
彼> プログラムは、何のようですか？


所見：IDFで重み付けした。「リトマス試験紙」が「リトマス」と「試験紙」に分割されている。キーワード抽出ではなくキーフレーズ抽出が必要。状態遷移にバグがあって正しく動いていない。

** 実験5 2015/1/17 0:59

この会話で何が起きて欲しいですか？
僕> この会話プログラムについての新しいアイデアがほしい
彼> あなたはそのアイデアをどう知るのですか？
僕> ここでプログラムに質問されることで予期しない盲点に気づいて、そこから知る
彼> あなたはその盲点をどう知るのですか？
僕> 質問されて、はっ、それは考えたことがなかったな、と思って。
彼> 会話は、何のようですか？
僕> 卓球のラリーのよう。
彼> 会話は、どんな種類の会話ですか？
僕> コンピュータがひたすら質問を投げかけてきて、僕がひたすら打ち返す。
彼> ラリーは、どこにありますか？
僕> 人間とコンピュータの間に。
彼> そのコンピュータは、どこにありますか？
僕> 目の前に。
彼> アイデアは、何のようですか？
僕> 新しい芽のようで、そこから成長する。
彼> その成長は、どんな種類の成長ですか？
僕> 何かに気づいて、それについて考えると、また新しい盲点に気づいて、また考える、ということを繰り返してどんどん大きくなっていく。
彼> その盲点は、どこにありますか？
僕> 盲点は人間の中にある。
彼> コンピュータについて、他に何かありますか？
僕> 普通のラップトップ。すごく性能の高いマシンが必要なプログラムだと、ユーザ個々人が手軽に使うことができなくなっちゃうから。
彼> 盲点は、何のようですか？
僕> 難しい質問だけど、パッと思いつくのは黒い穴。
彼> その穴は、どんな種類の穴ですか？
僕> 中が見えない
彼> あなたは普通をどう知るのですか？
僕> 普通って何の話だっけ、ああ普通のラップトップってことか。それはリーズナブルな価格で入手できるってこと。
彼> あなたはそのラップトップをどう知るのですか？
僕> ラップトップでなくてもいいんだけど、手軽に使えるコンピュータというイメージ。ということはiPhoneとかでもいいわけだな。処理能力が足りるならむしろそういうモバイル端末のほうが手軽さでは優っている。
彼> そのラップトップは、どこにありますか？
僕> 今想定していたラップトップは人間のそばにいつもある感じ
彼> そのラップトップには、位置がありますか？
僕> まあ、目の前
彼> ラップトップは、どちらの方向ですか？
僕> 正面にあって、人間の側を向いている
彼> ラップトップは、内側ですか？外側ですか？
僕> 外側
彼> ラップトップは、どんな種類のラップトップですか？
僕> 僕が当初イメージしていたのは最近会社の事情で使っているWindowsの入ったDELLのラップトップ
彼> そのラップトップは、いくつありますか？
僕> 普通は1度に1個
彼> あなたが価値を感じているのは何ですか？
僕> ここまでの話の中で価値を感じているのは、アイデア、盲点、成長、後は質問を投げかけてくるプログラム、かな
彼> その質問には、大きさや形がありますか？
僕> ない
彼> ラップトップは、どれくらい遠いですか？
僕> 物理的には手が届く近さだけど、人間との近さっていう意味では人間になりえない遠い存在だね
彼> その人間は、どれくらいの年ですか？
僕> 僕は30年ぐらい
彼> 人間は、どんな種類の人間ですか？
僕> アイデアを作り出すことが求められているような種類の人間
彼> そのアイデアは、どのあたりにありますか？
僕> まあ、頭の周辺かな
彼> プログラムは、どれくらいの年ですか？
僕> 昨日作り始めたとこ
彼> 人間には、大きさや形がありますか？
僕> まあほどほどの
彼> あなたが価値を感じているのは何ですか？
僕> アイデア、盲点、成長、質問を投げかけるプログラム
彼> そのプログラムは、何のようですか？
僕> カウンセラーだね
彼> 人間には、位置がありますか？
僕> NG なんでそこでせっかくの新キーワード「カウンセラー」を使わないかな
彼> そのカウンセラーは、何のようですか？
僕> 小学校の教師のように根気強く、相手が自分で答えを見つけ出すのを待つ
彼> あなたが価値を感じているのは何ですか？
僕> アイデア、盲点、成長、質問を投げかけるプログラム、カウンセラー、教師、根気強さ、答え
彼> あなたはその成長をどう知るのですか？
僕> 盲点の成長だよね、えーと、盲点に気づいて、それについて考えていて「あっ、これに気づいていなかった」と新しい盲点に気づいた時に知る
彼> その盲点は、いくつありますか？
僕> 無数にある
彼> 盲点は、どんな種類の盲点ですか？
僕> 今回の例では、このプログラムに欠けている機能。例えば昨日気づいた例だと、おなじ質問を繰り返してしまう問題とか、今だと「盲点」って言葉が出てきた時になんて言ってたか既に僕が忘れているので、離れた文章からの単語だったら文章を再掲する必要があるんじゃないかな、とか、そういうこと。
彼> その盲点について、他に何かありますか？
僕> うーん、「それをキーワードにするな」とか「これをキーワードにしよう」とかをコマンドの形で入力できるといいのかな。
彼> あなたが価値を感じているのは何ですか？
僕> この質問、何度も出てきてるけど アイデア、盲点、成長、質問を投げかけるプログラム、カウンセラー、教師、根気強さ、答え
彼> その根気は、どこにありますか？
僕> 教師の心の中
彼> ワードには、位置がありますか？
僕> キーワードには位置はない。キーワードではなくキーフレーズにする必要があるな。
彼> 教師について、他に何かありますか？
僕> 教師という言葉では生徒に何かを教える、インプットする役だという先入観が持たれがちだけど、そうではなく、生徒の主体的な行動とか気づきとかを引き出す役割としての教師が重要だと思っている
彼> 根気は、どちらの方向ですか？
僕> まあ上昇する方向で
彼> ワードは、何のようですか？
僕> キーワードはフックのようなもので、それがないと掴みどころがなくなってしまう
彼> 教師は、何を着ていますか？
僕> 普通の服
彼> あなたはワードをどう知るのですか？
僕> キーワードをどうやって知るのかというと、うーん、キーワードを列挙しろと言われるとできなくて、何かしゃべれと言われても難しいけども、質問をされるとそれらよりも簡単に考えていることが言語化されて、言語化されたものを目の前にするとその中で使われている単語のうち何が重要なキーワードであるのかはすぐにわかる。あと、キーワードでないものに対して質問をされると的はずれであるように感じてイラッとする。
彼> あなたはその言語をどう知るのですか？
僕> 「言語化」が分割されてしまっているなぁ。やはりまずはそこを修正しないとだな。
彼> ワードは、どちらの方向ですか？


所見：キーワード抽出をキーフレーズ抽出に変えるのは急務

*1421427974*キーフレーズ抽出をつけた
彼> この会話で何が起きて欲しいですか？
僕> キーワード抽出ではなくキーフレーズ抽出に変えたのでその動作確認をしたい
彼> あなたはそのキーフレーズ抽出をどう知るのですか？
僕> 今までは形態素解析して名詞を取り出してIDFで重み付けしてたんだけど、このバージョンでは名詞が連続している場合は結合することにした
彼> あなたが価値を感じているのは何ですか？
僕> キーフレーズ抽出だね
彼> 形態素解析について、他に何かありますか？
僕> 今回はKyTeaを使ってるんだけど、例えば「リトマス試験紙」は「紙」だけ接尾辞扱いになったりする。なので名詞直後の接尾辞は名詞の一部として結合するコードを書いた。
彼> その名詞直後は、何のようですか？
僕> ああー、それをくっつけちゃうか…
彼> KyTeaは、何のようですか？
僕> MeCabはツール感があったけど、KyTeaは部分アノテーションで育てていく感じが生き物っぽい
彼> キーワード抽出は、何のようですか？
僕> 最初のプロトタイプとしてはまあ悪くなく動いたけど、使っているうちにそれでは全然十分でないことがわかった。
彼> キーフレーズ抽出は、どのあたりにありますか？
僕> 人間からの入力を受け取ると即座にキーフレーズ抽出に回している。いや、正確にはNGでプレフィックスしている場合は別経路だけど。
彼> あなたが価値を感じているのは何ですか？
僕> KyTeaとキーフレーズ抽出とこのプログラムが改善されること
(プログラムがクラッシュしました)

*1421504944*改善案を考える・人工無脳について振り返る
彼> この会話で何が起きて欲しいですか？
僕> このプログラムの改善案について話し、それについて質問されることで考えを整理し、新しいアイデアを見つけたい
彼> あなたはその改善案をどう知るのですか？
僕> ユーザの発話の中からどの部分をキーフレーズとして抽出するかについて、最初のバージョンでは直前の発話だけから抽出してランダムに選んでいて、それでは話がどんどんずれていくので次のバージョンでは過去の発話も含めてランダムで選ぶようにして、それだと直前の発話から選ばれる確率がどんどん下がってしまうのでエビングハウスの忘却曲線的なのを入れて、IDFで重み付けして、スコアの高いものほど選ばれやすいようにしたのだけども、それでもイマイチなので抜本的に変更しようと思っている。
彼> その直前は、何のようですか？
僕> 直前の発話はまさに今聞いた内容で、やはりそれをきちんと聞いている風の反応をしないとユーザが手応えのなさを感じてしまう
彼> その風は、どんな種類の風ですか？
僕> 相手の発言を受け止めていることを、相手が実感できる
彼> 発話は、どんな種類の発話ですか？
僕> 質問に対するユーザの回答で、
彼> 発話は、どのあたりにありますか？
僕> 質問に対するユーザの反応で、それが長いほど傾聴がうまく言っている証拠、と書こうとしたのだが失敗した。発話は入力としてプログラムに入ってくる
彼> その発話について、他に何かありますか？
僕> 発話が長くなるように適切なキーフレーズを選んで質問することが重要。
彼> 傾聴について、他に何かありますか？
僕> 傾聴こそがこのプログラムがユーザに与える価値なので、まずは傾聴を定量的に計測する尺度を明確にして、その尺度の上で最適化を掛けるのがよいのではないかと考えている。
彼> 発話は、何のようですか？
僕> 発話はユーザという果実から搾り出されたジュースみたいなものだ。絞っているのが質問。
彼> 入力は、どんな種類の入力ですか？
僕> 現状ではキーボードを叩いてチャットのような形で入力している。音声入力が好きな人もいるけど、それは優先度の低いパスだと思う。
彼> そのキーボードは、何のようですか？
僕> 考えを綴る道具って考えるとペンのようだな。
彼> あなたはパスをどう知るのですか？
僕> まあ、音声入力ではなくキーボード入力に選択と集中するのは特に根拠の無い選択ではある。
彼> ユーザは、どこにありますか？
僕> コンピュータの前にいる。当面は僕がユーザだと思って良い。
彼> 音声入力は、どんな種類の音声入力ですか？
僕> NG そちらの話を掘り下げたいとは思っていない
彼> 傾聴は、何のようですか？
僕> ユーザの発話の中から適切なキーフレーズを見つけて、それについて問いかけることで更にたくさんの発話を促す、芋掘りみたいにつながり合っているアイデアを蔓が切れないように気をつけながら引っ張って、土から引きずり出すようなプロセス。
彼> そのキーフレーズは、どこにありますか？
僕> キーフレーズはユーザの発話の中にあって、どこがキーフレーズであるかを判定するのが目下の重要課題
彼> そのキーフレーズは、どんな種類のキーフレーズですか？
僕> 今は、形態素解析で単語を抽出した後名詞を結合してキーフレーズを作っているが、その結果IDFの辞書に登場しないものに関してはスコアが上限に張り付いてしまう。別のスコア付けの方法が必要で、そのスコアは「ユーザがどれだけ長い返答を返すか」に相関する
彼> そのキーフレーズについて、他に何かありますか？
僕> 構成単語やNグラムの特徴量からロジスティック回帰かパッシブアグレッシブみたいな方法でスコア付けする。あ、あと直前の発話の中のキーフレーズは特別扱いで高い優先度にすべき。あとこれを書いていて気づいたけど、今、名詞が連続しているとそれは全部くっつけたもの1個だけをキーフレーズにしてしまっているけど「直前発話中のキーフレーズ」だと「直前発話中」だけをキーフレーズにするんじゃなくて、部分列全部をスコア計算したい。
彼> そのキーフレーズは、何のようですか？
僕> フックのようで、そのフックで引っ掛けて引っ張りだす。
彼> キーフレーズは、どのあたりにありますか？
僕> 直接的にはユーザの入力の中にあるのだけども、過去の発話全部が共通のキーフレーズを介してネットワーク上につながっていて、キーフレーズは個々の発話をつなぐ紐であり、1つの発話の中だけに出てくるキーフレーズはそれほど重要ではない。何度も出てきて幾つもの発話で描写された側面をつなぎあわせているようなタイプのキーフレーズが重要。だから、キーフレーズは発話の中にあるって考えは適切ではないな。それは発話の間にあって、発話の上をゆるやかに覆っているイメージが適切か。
彼> あなたはそのキーフレーズをどう知るのですか？
僕> プログラムがどういう質問を返してきたかによって、プログラムが何をキーフレーズとして認識しているかがわかる。その認識が正しくない時にそれをプログラムに教える手段があればよいのか。
彼> 考えは、どこにありますか？
僕> キーフレーズは発話の中にあるって考えは、発話からキーフレーズを抽出する処理を書いたことに起因する思い込みの中にある
彼> ユーザについて、他に何かありますか？
僕> ユーザは適切な質問をされると楽しくなってさくさく返答が掛ける。だからそれを計測すると質問が適切であったかどうかが計測できるはずか。やはりターン制の対話プログラムではなくリアルタイムなチャットの形にして、入力時間なんかを特徴量として取ることが重要か。
彼> あなたはそのターン制をどう知るのですか？
僕> ターン制を選択したのは単に実装上一番楽であることが理由。必須ではないと当初から考えてた。リアルタイム化も難しくないよ、基本的には人間の発話を待てばいいだけなので。
彼> その実装上は、何のようですか？
僕> よくある間違いだな。何が顧客にとっての価値につながるかではなく、何が自分にとって楽であるかで実装を選択してしまうという間違い。
彼> スコア付けは、どこにありますか？
僕> 今の実装では、入力を受け取って形態素解析した後、その形態素列を受け取ってスコアその他の「環境」を更新する関数がある。キーフレーズのスコア付けがその関数の最初の仕事だったけど、今では拡張されて状態遷移で対話のフローを管理することも引き受けている。
彼> あなたはその状態遷移をどう知るのですか？
僕> 今はMetaphors in Mindを参考にしながらハードコーディングしている。
彼> ターン制について、他に何かありますか？
僕> 簡単な事で、今は入力欄でユーザがEnterを押したことを、即座にターンエンドの宣告として解釈しているわけだけど、現実のリアルタイムのチャットではそうではない。続きを書き始めている時、話が完了してない時はターンエンドではない。続きを書き始めているのはCUIアプリではなくHTML+JSとかのインターフェイスに変えれば簡単に取れる。
彼> ハードコーディングは、どんな種類のハードコーディングですか？
僕> 今の状態を保持する変数があって、ある状態でどういう条件を満たしたらどういう状態に遷移するかってのがコードで実装されている
彼> その条件について、他に何かありますか？
僕> 特にパラメータのあるタイプの条件では、本当にその条件が適切かどうかっていう検証がないのは問題。そこは十分なデータがあれば自動調整することもありえるかと。
彼> その条件は、どんな種類の条件ですか？
僕> 具体的には例えばキーフレーズの抽出数が一定量を超えたら、とか。
彼> その一定量は、どんな種類の一定量ですか？
僕> 今はフィーリングで決め打ちになっている。実際に、一度大きくしすぎて期待した遷移がなかなか起きないこともあった。今もそう。あー、あとはキーワード抽出だった時代に比べてキーフレーズ抽出に変えたから抽出される数が減っているのにそれに合わせてないのも原因か。今後キーフレーズの部分列もキーフレーズにするように変えたら、今度は抽出数がぐっと増えることになるな。
彼> その抽出数は、どこにありますか？
僕> 単純に、今までに出てきたキーフレーズとそのスコアを溜めている変数があって、それのサイズで見ている。
彼> 部分列は、どんな種類の部分列ですか？
僕> 複数の単語で構成されているキーフレーズに
彼> 関数について、他に何かありますか？
僕> キーボードの調子が悪い…Enterキーが2度押しになってしまうとか酷い……。複数の単語で構成されているキーフレーズに関して、その列の一部を取り出してできるフレーズもすべてキーフレーズとしよう、という意味ね。関数は環境更新の話だったか。他には…いろいろな機能を引き受けすぎの感はあるな。でもここはホットスポットなので今はグチャッとしてても仕方ないと思う。状態の更新は今はハードコードでも、最終的には行列に変わると思っている。決定論的な遷移は確率的な遷移の特殊形にすぎないわけで、内部状態が外部からの入力により確率的に遷移して、その状態によって外部へのアウトプットが確率的に決まる、というモデルを考えていて、現状前半が決定論的、後半が確率的になっている状態だけど、前半も確率的になるのが適当だし、それは遷移行列で表現されるだろう。
彼> その2度押しについて、他に何かありますか？
僕> NG その話題を掘り下げるのはやめよう。
彼> その2度押しは、何のようですか？
僕> NG やはり「それやめよう」コマンドは必要だな。直前の質問を作成するのに使われたキーフレーズのスコアを減らすコマンドとして。
彼> その確率的は、どんな種類の確率的ですか？
僕> 今のプログラムの出力を決める確率モデルは単純で、状態が決まるとその状態で出力可能な複数の質問テンプレートが決まり、質問テンプレートに埋め込むキーフレーズは別途抽出されており、その直積の集合から「既出の質問」と「NG登録された質問」を取り除いたものからのサンプリングになる。
彼> 確率的は、どこにありますか？
僕> 今は出力を返す関数の中にハードコードされている。
彼> 確率的について、他に何かありますか？
僕> これも今はハードコードされているけど、出力確率の行列になってもよいと思う。資料中の会話例から頑張って教師データを作ったら隠れマルコフモデルのパラメータ推定問題に帰着するなぁ。めんどくさいし、あんまり顧客価値の改善につながらないと思うのでやらないけど。頑張って教師データを作って学習させるよりは、普段使っているうちに徐々に賢くなる方がいい。
彼> そのハードコードは、どこにありますか？
僕> 出力を返す関数の中。
彼> 教師データは、何のようですか？
僕> 負担。性格的な問題かもしれないけど、僕にはマメさがないので、教師データを事前に頑張って整備したら性能が上がります、っていう系統の手法はあんまり好きになれない。
彼> 決定論的について、他に何かありますか？
僕> 昔の人工無脳はおおよそ決定論的だった。キーワードがマッチした時に出力される言葉が決まっていた。だけどその後、ひとつのキーワードに対して複数の出力を対応付けることができるものが出てきて、その場合、キーワードのマッチした出力の集合からランダムにサンプリングして出力されるような実装になっていた。今から考えると、あれが決定論的な対話から確率的な対話への分かれ道だったかもしれない。
彼> その人工無脳は、どんな種類の人工無脳ですか？
僕> キーワードとそれに対する出力のペアを持っていて、ユーザが入力した時に、その入力の中にキーワードが見つかればそれに対応した出力を出す。このシステムとの比較で説明すれば、キーフレーズ抽出の部分が、あらかじめ登録されているキーワードの文字列パターンマッチで置き換えられている
彼> 遷移は、どこにありますか？
僕> 今説明した範囲では昔の人工無脳に状態遷移はない。僕が中学生の時に作った人工無脳はその点がちょっと改良されていて、文字列パターンマッチの対象がプログラムの発話自体にも拡張されていて、かつ不可視なラベルを埋め込む構文を用意したため、キーワードと出力のペアっていう従来型のデータ形式の枠組みを引き継ぎつつ、内部状態の遷移を記述できた。それまでの人工無脳が刺激に対して単発で反応するだけで記憶を持たなかったのに対して、僕のフレームワークを使えば複数回の出力で構成されるようなやりとりを記述することができた。
彼> その出力は、どのあたりにありますか？
僕> データファイルの中に、キーワードと一対一対応する形で記述されていた。
彼> ハードコードについて、他に何かありますか？
僕> そういう意味では、その人工無脳はなんらの確率モデルをハードコードしていない。全部データ側に押し出されていて、システム側は状態遷移を記述出来るだけの表現能力を持った記述言語を提供することに徹していたといえるだろうなぁ。
彼> その人工無脳は、何のようですか？
僕> 子供だね。知識を与えれば与えるほど成長してより賢くなる。しかしとにかくデータ量を増やせば賢くなるはずだというアプローチは、データ追加の労力あたりの賢くなった実感が徐々に飽和しだしてしまった。アトムを作った天馬博士と同じで、自分の子供だと思っていたアトムが成長しないことに気づいて愛が失われてしまった。
彼> そのデータ量は、どんな種類のデータ量ですか？
僕> 人間が直接手作業で入力することで作られたデータの量。だからさっきの話だと学習データに相当するもので、負担なわけだ。しかし当時は汎化性能って考え方がなかったから、入力した以上に処理できる量をスケールさせる方法がわからなかったんだな。
彼> 人工無脳について、他に何かありますか？
僕> 人間と対話することを主目的とするプログラム、っていう観点から言うと、Siriだとかしゃべってコンサルだとかの形で対話経験のあるユーザはかなり増えたんじゃないのかな。Herって映画もあったし。ただ、20年前のその人工無脳ブームは「Appleが作って与えた人工の人格との会話が楽しくてブームが起きた」のではなく「個々人が自分の好きな仮想の人格を実装して、自分だけの人工無脳を作ることが出来る」というところが顧客価値になっていたと思う。お仕着せの仮想人格と話すことではなく、自分でつくり育てることの方に価値を見出すユーザがいるっていうのが重要なポイントだと思うなぁ。
彼> その人工無脳は、どのあたりにありますか？
僕> インターネット上にチャットルームがあって、まあPerlで書かれたCGIなので簡単に設置や改造ができて、そいつに人工無脳が搭載されている、という時代があったわけだよ。そうか、最近の若い人にとってチャットってのはSkypeやLINEなのか。そうだとすると人工無脳を設置するのはそう手軽ではないか。

所見：当初の目的からずれていってるなー。当初の目的に照らし合わせて有益かもしれない内容を整理すると:
- 音声入力を避けてキーボード入力に専念していることに、特に根拠は無い
- 「キーフレーズはユーザの発話の中にある」と考えていたが、これは根拠の無い思い込みにとらわれていた。「キーフレーズは発話の間にある」と捉え直すことで、キーフレーズの役割は複数の発話を結びつけることであり、発話をまたいだ出現回数こそが本質的に重要な尺度なのに今はそれを使ってないってことに気づいた
- また、適切でないキーフレーズが選ばれている場合、ユーザはそれに気づくことができるので、その気づきをプログラムに教える手段を用意すべき
- 当初考えていた「ユーザの発話の長さが長くなるように機械学習で適切なキーフレーズを選ぶためのモデルを作る」をやる上では、ユーザの入力時間とかも取れたほうが良いのではないかということで、まずはリアルタイムチャット形式へのUIの変更のほうが優先度高。
という感じか。
</body>
```


[はてなダイアリー 2015-01-17](https://nishiohirokazu.hatenadiary.org/archive/2015/01/17)