
hatena

```
<body>
*1313756054*セプキャン2011感想文
みんながバイナリ((http://d.hatena.ne.jp/mayahu32/20110816/1313505335))とかバイナリ((http://twitter.com/#!/_ko1/status/103706889086443520))とかUCAS((http://d.hatena.ne.jp/k_operafan/20110815/1313421656))とかで書いて読むのに苦労したから、僕はちゃんとASCIIで書きましたよ！

https://gist.github.com/1156669

** 言語仕様
1文字1トークンで、単純に並べるだけで関数呼び出しになる。たとえば「XYZ」というコードがあった場合、これはPythonでいうところの「X(Y)(Z)」に相当する。つまり「関数Xに引数Yを渡して呼び出し、その返り値の関数に引数Zを渡して呼び出す」という意味だ。

括弧()は特別な意味を持っていて、まあみんなの期待通り処理をまとめるのに使われる。評価は内側の括弧から順番。たとえば「X(YZ)」というコードがあった場合、これはPythonでいうところの「X(Y(Z))」に相当する。つまり「関数Yに引数Zを渡して呼び出し、その返り値を引数として関数Xを呼び出す」という意味だ。あと一番内側が複数個ある場合は一番出現が早いものが評価される。「( (01)(02)(03) )」だと01,02,03の順に実行されるってことね。(追記:「一番内側」という言葉が「一番カッコの深いところ」と誤解されうるのでもう一言書いておくと「( (01) (0(02)) (03) )」は01, 02, 0(02), 03の順に実行される。)

組み込み関数がU, 0, 1の3つ。あと名前付けのための特殊形式+がある。

一番独特なのは数値が全て関数でもある点で、整数オブジェクトはその数だけ増やす関数としても扱える。1は整数の1であると同時に関数でもある。たとえば「11」は「1という関数に引数1を渡したもの」になるので2になる。ただし、0だけは0増やす関数になっても面白く無いので引数を出力する関数にした。返り値は引数に0を足したものになる。先ほどの例にあった「( (01)(02)(03) )」は1,2,3の順に出力し、その後(123)を評価して6を返す。

あと特殊形式+は値を名前に束縛する。「+X(11)」とやると、(11)が整数の2になってからそれをXという名前に束縛する。だからそれ以降「XX」とかやれば関数2に数値2を入れたことになって4が返る。評価の順番に注意。意外に思うかも知れないが「X(+X(11))」は最初のXが評価されるのより+Xで束縛される方が先なのでエラーにならずに実行される。なお(+XY)の返り値はYである。

もう一度例を挙げると、「(0(1(01)))」はまず(01)が評価されて1が出力され、(0(11))の(11)が評価されて2になり、最後に(02)が実行されて2が出力される

組み込み関数Uの仕様は http://en.wikipedia.org/wiki/Iota_and_Jot を参照。

言語の名前はspcampでバージョン番号が2011.0.0。

他になにか言うことあったかなぁ。不明な点があれば気兼ねなくコメントしてください。

ソースコードにSとかKとかIが出てきているのはかなり親切に書いたつもり。全部Uで書いてもよかったんだけど本質的じゃない部分で読みづらいし。特殊形式の+とかもSKIをUから定義してコードをコンパクトにするために作ったわけだし。S,K,Iについて良い日本語の記事がどこにあるかわからなかったので SKI combinator: http://en.wikipedia.org/wiki/SKI_combinator_calculus を参照。(追記:Uの仕様も含めて<a href='http://blog.livedoor.jp/dankogai/archives/51524324.html'>404 Blog Not Found:Math - 言語はどこまで小さくなれるか - (unlambda|iota|jot) のすすめ</a>がよくまとまっている)

1文字1トークンだからレキサーいらないし、構文も括弧で木構造なだけだからパーサも簡単。処理系はPythonで書いてて、doctestでテストケースたくさん書いて300行程度だからテスト削ったら200行くらいかなぁ。dis.disでバイトコードにディスアセンブルして562行くらい。SimpleHTTPServerよりちょこっと小さい。

追記: 12:03時点でメールで1通の正解が送られて来ました。

*1313757478*NHKでセプキャンが紹介されました
http://cgi2.nhk.or.jp/nw9/pickup/?date=110818_2

テレビがないので見れないと思ってたけど、公式にオンラインで見れるようだ。NHKすばらしい。内容も前提知識のない人向けということを考えればよくまとまってるんじゃないかな。

そして0.2秒くらいしか僕が映ってないのに妻が1回見ただけで発見してて女性は恐ろしいと思った。
<img src="http://gyazo.com/f7f8e9d63881b4454efd60ee55caa3fd.png">

あ、あとLACかっこいい。
</body>
<comments>
<comment>
<username>sora_h</username>
<body>西尾さん特定余裕でした<br><br>LACかっこいい</body>
<timestamp>1313797655</timestamp>
</comment>
<comment>
<username>sora_h</username>
<body>自作インタプリタエラー吐かないで実行できたけど，これは出力するときに文字として出力するようにしたほうがいいのか，数値を出力したほうが良いのかどっちなんでしょう．<br>数値を出力するとこれは本当に感想文なのか，という感じで．<br><br>RubyのInteger#chr使ったら途中Range超えてエラーはいたし．<br><br>もしくはこれをデコードしろということ?</body>
<timestamp>1313989940</timestamp>
</comment>
<comment>
<username>nishiohirokazu</username>
<body>>途中Range超えてエラーはいた<br><br>なんか間違ってる疑惑</body>
<timestamp>1313992775</timestamp>
</comment>
<comment>
<username>sora_h</username>
<body>ですよねー(回答得るまでにバグみつけた)</body>
<timestamp>1314003074</timestamp>
</comment>
</comments>
```


[はてなダイアリー 2011-08-19](https://nishiohirokazu.hatenadiary.org/archive/2011/08/19)