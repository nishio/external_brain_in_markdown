---
title: "Hatena2013-02-02"
---

hatena

```
<body>
*1359774217*PrologとHaskellの挙動の違い
foo(0)とfoo(N)を用意しておいて、Nの時にはなにか処理をしてからfoo(N - 1)を再帰呼び出しする、というコーディングパターンをPrologで使う際に、Haskellの発想で書くと罠にハマるのでメモ。

まずHaskellで挙動を確認してみる。
>||
foo 0 = do{ print "rule1"; print 0 }
foo n = do{ print "rule2"; print n }

main = do
  foo (1 - 1)
  foo 1
  foo 0
||<

>||
"rule1"
0
"rule2"
1
"rule1"
0
||<

foo(1 - 1)でfoo 0の定義が呼ばれていることがわかる。またfoo 0でfoo 0の定義だけが呼ばれていることがわかる。(何を当たり前のことを、と思うかもしれないけども、その思い込みにハマった)

Prologで同じような書き方をしてみよう。
>||
foo(0) :- print('rule1: '), print(0).
foo(N) :- print('rule2: '), print(N).
||<

>||
?- foo(1 - 1).
rule2: 1-1
true.

?- foo(1).
rule2: 1
true.

?- foo(0).
rule1: 0
true ;
rule2: 0
true.
||<

Prologでは、まずfoo(1 - 1)はfoo(0)にマッチしないのでrule2になっている。Haskellではパターンマッチのタイミングで1-1の評価が強制されて0になるが、Prologではされない。またfoo(0)の時に、rule1にマッチした後、rule2にもマッチしている。

Prologでフィボナッチを計算している例などを見ると、うまくこの落とし穴を避けるような書き方をしてある。出かけないといけないので続きはまた今度。ヒントはカットとis。

*1359814741*Twitterにログインできなくなった
「<a href='http://www.itmedia.co.jp/news/articles/1302/02/news013.html'>Twitter、25万人のパスワードを含む個人情報漏えいの可能性 - ITmedia ニュース</a>」の影響でTwitterへのパスワードがリセットされた。

リセットされた旨のメールが届いている人は、そこからリセットをすれば良いらしい。しかし僕には届いていない。「メールアドレスが間違ってる」とか「メールサーバが死んでいる」とか「スパムに入っている」などのミスではないかと思ったが、どうもそうでもなさそうだ。

まず、僕の記憶の中のメールアドレスをパスワードリセット画面で入れてみると「いいですね」と表示される。存在しないhoge@...orgなどを入れると「メールアドレスまたは電話番号が無効です」と表示されるので、このメアドは有効なアカウントと紐付いているのだろう。

[f:id:nishiohirokazu:20130202230531p:image]

次にこのメアドに対して自分でメールを送ってみた。問題なくGMailに転送された。というわけでメールサーバが死んでいるわけでもない。しかしこのパスワードリセット画面からこのメールアドレス宛のメールを送信しても、届かない。

最後に、spamに分類されているのではないかと確認してみたが、そこにもない。


他にどういう可能性があるかなぁ。なんだかもうめんどくさくて「Twitterなんて人生に必須なわけじゃないから使えないならもう使えないままでいいかー」みたいな気分になってきた。

追記: なお、はてなからのTwitter連携とか、iPhoneのTwitterアプリとかからは投稿ができるようだ。このブログエントリーもはてな連携を使ってTwitterに投稿しておく。
</body>
```


[はてなダイアリー 2013-02-02](https://nishiohirokazu.hatenadiary.org/archive/2013/02/02)