---
title: "私のコード履歴書"
---

> プログラムをはじめてから今まで、いったいどんなものを書いてきたのかを列挙すると面白い
[https://satoru-takeuchi.hatenablog.com/entry/2020/03/17/153715](https://satoru-takeuchi.hatenablog.com/entry/2020/03/17/153715)

やってみた

- 父親がJXを買って、家にパソコンが来た。ROMにBASICが入っていて、付属マニュアルにBASICでのプログラミングの解説もあった。FOR文で位置と半径を変えながらCIRCLE文で円を描いて謎の模様を作って遊んだ
    - [https://ja.m.wikipedia.org/wiki/IBM_JX](https://ja.m.wikipedia.org/wiki/IBM_JX)
- 新聞の解説を読んでニューラルネットを実装した。0+0=0や1+0=1は覚えさせられたが、1+1=2はどうしても覚えてくれなかった(覚えたと思ったら他のことを忘れている)
    - 今思えばヘブ則の解説と図解だけ見て単層の原始的なニューラルネットを実装したので、線形非分離な問題が解けないのである。簡単な問題のつもりで二進法の足し算を選んでいたが、足し算の中にあるXORは典型的な線形非分離の問題。
    - [https://ja.m.wikipedia.org/wiki/ヘッブの法則](https://ja.m.wikipedia.org/wiki/ヘッブの法則)
- 3Dをやりたくなって、三角関数を頑張って使って立方体を回転させるプログラムを作る。しかし透視投影を知らなくて、素朴に「奥行き方向を無視する」という方法で並行投影していた。陰線処理も知らなかった。3D詳しい人ならわかると思うけど、それをやると「伸縮する長方形」みたいな感じになる。ガッカリしてやめる。
- 家のマシンがWindowsになる。Visual BASICを手に入れる。ちょっとしたランチャーとかメモアプリとかを作る。当時フリーウェアをCDにたくさん詰め込んだ雑誌が流行ってて、収録依頼がたくさん来て、OKを出すとその雑誌がもらえた。古本屋に売れないかなと三宮高架下の古本屋に持っていって断られる。
    - 父親のメアドでメーリングリストに参加して、バイナリの中身をそのまま投稿したり、「シェアウェアのパスワードが不正に流通してる問題を解決するには、入力するとハードディスクをフォーマットする偽キーワードを作って不正に流れてるパスワードリストに混ぜ込めば良い。十分リスクが上がれば不正利用は出来なくなる」と主張して大人と大喧嘩になったりした。危険すぎる…。幸い僕は実行しなかった(という記憶)だが、実行した人がいて問題になった。
        - [https://ja.m.wikipedia.org/wiki/WinGroove](https://ja.m.wikipedia.org/wiki/WinGroove)
- 僕がペイントブラシで描いた絵による「怪しいところをクリックしたら話が進む脱出ゲーム」
    - 今や影も形もないけど、酷い絵のクオリティだった記憶
    - あの酷いグラフィックのゲームを見て手放しで褒めた母は偉い
- 人工無能ブーム、CGIで動くチャットボットが、当時夜11時以降のテレホーダイ時間帯以外はインターネット接続が従量課金だったせいで十分遊べないので、オフラインで動くように移植したバージョンを作る
    - 変数埋め込み(名前を呼ばせるとか)のためにテンプレートエンジンのようなものを作り始め、条件分岐などを実装して謎の自作プログラミング言語ができる
    - まあ文字列置換のテンプレートエンジンからズルズルとプログラミング言語化すると、if文のelse節の中身が条件節がfalseの時にも評価されちゃう罠にハマるよね。「副作用の有無」だとか「正格評価と遅延評価」などの概念は当時持っていなかったので普段波かっこで囲っているタグを角かっこで囲い、「角かっこを波かっこに変換してから文字列を再評価」っていう腐ったevalみたいなものを入れた
    - 今の僕が当時のあの言語を評価すると「腐ったLISPと腐ったPHPの悪いところを合わせた言語」とでもなるか
    - そんな言語を使ってプログラミングする人たちが現れて、中にはプログラミング未経験、文系です、みたいな人もいた。そういう経験もあってか、僕は「プログラミングは一部の才能のある人にしかできない」とちう選民思想には反対で、ただ適切な「興味を持てる対象」と「理解できる解説」の組み合わせに出会えていないだけだと思っている
    - このプログラムを中高一貫校の後輩がDelphiに移植し、DLL化して外部プログラムから呼び出し可能にするという面白げなことをしたのだが、当時の僕はその面白さを理解できていなかった
    - 人工無能の処理の中で外部exeを起動して処理を委譲する仕組みとか積んでたんだけど、今考えるとすごい脆弱性を作り込んだもんだな。
- 高校の友達と一緒に、尼崎あたりにあったベンチャーに遊びに行ってVRMLでなんかいろいろ作るシステムをもらった、一回遊びに行ってしばらくそのVRMLでゲームを作ったりしただけなので詳しいことは忘れてしまった
    - 社長さんは自分が提案書を自治体に出したことでそのインキュベーション施設ができたって主張してて、ほー、そんなもんかーみたいに思った
- 大学に入学したら、会社の近くのベンチャー企業がインターネットに接続してるサーバを無償で貸してくれたのでホームページなるものを作り始める。そしてKENT CGIのPerlのコードを設置して、読んで、改造し始める
    - POSTリクエストをデコードするところはよくわかってなかったが、メインの処理にはデコード済みのものが渡ってくるので、やり取り部分はブラックボックスにしてた
    - Nethackとかいうターミナルで遊ぶゲームが面白かったので、自分のウェブページにもゲームを設置したいと考え、「右、左、直進」などとリンクを選ぶと進んでいくテキストベースのゲームを作る。なおKENTの掲示板CGIを改造して作っているので、ダンジョンの壁にコメントを残すことができる。人が通るたびにだんだん消えていくのもNethackの真似。
- 地元で開催されてた研究会に参加して、上記の会話アプリの話をしたら、なんだか偉い人の間でパスがつながって、当時けいはんなでオンライン3Dバーチャルワールドを作ってた会社にアルバイトとして参加することになる、C++の物理演算やネットワーク通信のコードを眺めたりしたがあまり貢献できることはなかった。そのシステムにPythonで書いたスクリプトを組み込む機能が付いて、テンション上がって色々なワールドを作りまくった。
    - 具体的には
        - 電子銃を撃って、それが磁場で歪むのを観察できるワールド、モノポールつき
            - ベクトル演算を多用する、ここで先輩が作ってたベクトル演算ライブラリを、クラスとか使って「良い設計」にしたつもりのものを作って置き換えてパフォーマンスが大幅に悪化する体験をした
                - 要するに秒間何十回「位置」や「速度」のベクトルを更新する必要があるシチュエーションで、それらのベクトルをすべてPythonのオブジェクトにした上で演算のたびに新規オブジェクトを作ったらオーバーヘッドがでかいよね、という話。今ならわかる。
                - オブジェクトの破壊的更新をしない方が変なバグを仕込みにくくなる、しかしパフォーマンスは落ちる。人間にとっての優しさと、コンピュータにとっての優しさはしばしば相反する、と学んだ
        - 非線形バネで物が吊るされていて軌跡を観察できるワールド
        - 操作方法のチュートリアル的な3Dゲーム
            - ここで対象物の方向を矢印で指したい、という悩みを大学の線形代数の授業でちょうど習ったグラムシュミットでできることに気づいて数学の有用性に感動した
                - [https://ja.m.wikipedia.org/wiki/グラム・シュミットの正規直交化法](https://ja.m.wikipedia.org/wiki/グラム・シュミットの正規直交化法)
        - 物理演算でタコをあげる
        - ブライテンベルグの車をアヒルのアバターの中に入れて、遺伝的アルゴリズムで挙動を進化させるワールド
            - [https://en.m.wikipedia.org/wiki/Braitenberg_vehicle](https://en.m.wikipedia.org/wiki/Braitenberg_vehicle)
            - ![image](https://gyazo.com/ef6458fa6483f4c1e42850fa552f646a/thumb/1000)
            - 画像右。カンバンにブライテンベルクと書かれている。ドーモ君みたいなやつは肉食獣。アヒルを食べることで淘汰圧をかける。こいつの3Dモデルは僕がメタセコイヤで作った
    - 2001年なのでセカンドライフのリリースの2年前だね。
    - ここで僕はPythonに出会う。そして「スクリプト言語処理系をコンパイル言語で作られたアプリに埋め込む」という発想にも
        - 後の初の書籍「Jythonプログラミング」につながる
    - 物理演算エンジンの実装の話を聞く。正しい物理法則である必要はなく、十分に高速で、十分にそれっぽく動けば良い。現実の挙動と同じであることよりも、ユーザが自然に感じる方が良い、というプラグマティズムの概念を獲得する
        - 現実と異なる物理法則を入れたグラフ可視化ソフトGRINeditに繋がった
    - バーチャルワールドに透明ポリゴンを入れたことにより、ポリゴンをソートする必要が出てきてパフォーマンスが悪化した。そこで先輩がソートのアルゴリズムを改善してパフォーマンスが劇的に改善した
        - クイックソートをヒープソートに変えたんだっけな？
        - ソートの種類とかは大学の授業でもちろん習ってたわけだが、とりあえずクイックソートでいいだろと思ってた。アルゴリズムの知識、適切な選択が、現実的な実益につながることをここで痛感した

このバイト先で未踏ユースのことを教えてもらって応募するのだが、ここからまだ未踏とその後の18年くらいの話が続くので、もう書くのが疲れてしまった

雑に箇条書き
- 未踏のお金でDelphiを買う
- Javaもやる
- i-modeアプリの受託アルバイト
    - サイズ制限が酷い
    - 版権物は権利者がめんどくさい
    - 受託は新聞記事になった時に「発注社の長年の研究開発により」とか書かれるのを目の当たりにしてメディアに対する不信感
- 大学院へ
    - Javaアプレットによる遺伝子発現情報の可視化
    - 研究室のサイトを当時はやってたPython製のCMSであるZopeにする
    - 後輩にプログラミングを教えるためにPythonとJavaの振る舞いを比較しながら解説するコンテンツを作る、後の書籍「コーディングを支える技術」での「複数の言語を比較することが良い理解につながる」という思想はここで生まれた
- 就職
    - とりあえずウェブアプリの会社なのでウェブアプリを作ってみよう、ってことでDjangoで「出されたお題に各言語で回答を投稿できるサイト」を作る
    - 収益化の目処が立たないのに会社にサーバ代を払わせていることに罪悪感を感じてGoogle App Engineに移植して無償枠で動かそうとする→大惨事
    - サービスの維持運営が性格に合わないことを痛感する
- アート活動
    - Context-free Art→パフォーマンス上の問題→自前でSVGを生成してレンダリング→SVGレンダラが死ぬレベル
    - 枝刈りのためにルート5を含む数を演算誤差なく扱う数値型を作って、libpngで自前でレンダリングする実装
- やる気を出すシステム
    - サーバの運営を嫌って静的HTML+JS
    - 将来の機械学習のためのデータはGAにエンコードして送ることにした
    - Akinatorのような仕組みにしようかと。
    - しかし機械学習するまでもなく単なるif文でユーザのニーズが満たされてしまう
    - GAにエンコードされて突っ込まれたデータを取り出すことの方が面倒
- kintoneおすすめグラフ
    - 製品にいわゆるAI的なものを入れる
    - このケースはまあ、評価関数を作る必要はあるケースだったが、世の中の大部分のニーズはもっと素朴な解決法でいいんじゃないかなーと思った
    - 真価を発揮できるようにする工数は重たすぎて、真価を発揮できない形の実装になってしまいがち
- JA配送ルート自動化
    - 最適化問題

