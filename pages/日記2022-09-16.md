---
title: "日記2022-09-16"
---


[[img2prompt]]はVRAM消費24GB

seed 752以下の画像についてバグが発覚
- ファイルから複数のプロンプトを読んで生成してるときに各プロンプトごとにシードを固定しないといけないのに最初でしかやってなかった
- なので、もし「seed=500」と記録されていたとしても、それは「seedを500にした後で何枚か画像を生成した後の状態」なので、改めてseed=500にしても同じ画像が出ない
- 頑張ればなんとかなるけど...
    - たとえばseed=500にした後、その画像が出るまで何度か絵を描けば良い
    - 妻「頑張るほどのことではない」
- じゃあいいかー
- [[日記2022-09-13]]の柄をブックカバーとか手拭いとかにできるサイズで出力しなおそうかと思ったのだが期待した画像が出ないので戸惑ってた
    - サイクリック画像の出力もできるようになったので手拭いに関してはそれでやろうかと思った

img2promptを高速化して1件2〜3秒で動くようにした
- 638件のimg2prompt結果が得られた
- Instagram投稿と並行して、Scrapboxへのインポートを考えていこう

[[トンプソンサンプリング]]
- 画像が「いい」か「いまいち」かはベルヌーイ分布とする
- その共役事前分布はベータ分布
- サンプリングして一番大きいものを選ぶのがトンプソンサンプリング
- ベータ分布からのサンプリングはnumpy.random.betaでできる
- ここに5回引いて1回あたりのスロットと100回引いて30回あたりのスロットがあるとする
    - 期待値としては後者の方が大きいが、前者の不確実性をポジティブに評価すべき
py

```
In [245]: [0 if beta(2, 5) > beta(31, 71) else 1 for i in range(20)]
Out[245]: [0, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1]
```

    - 20回中前者が11回選ばれている

[python-gyazo · PyPI](https://pypi.org/project/python-gyazo/)

[[日記2022-09-15]]←日記2022-09-16→[[日記2022-09-17]]
100日前 [[日記2022-06-08]]
1年前 [[日記2021-09-16]]