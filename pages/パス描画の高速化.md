---
title: "パス描画の高速化"
---

付箋2500枚の重たい環境にて after
![image](https://gyazo.com/59a44c1fd2631ae0dbbc78075f4ed2f0/thumb/1000)
before
![image](https://gyazo.com/9d9a80f02b23641a74ef4d8fe6611241/thumb/1000)
- パスの高速化
- [[レンダリング処理がパスドローをブロックする]]の解決
    - パスはオーバーレイに書く
    - pathBufferに入れる
    - 書いてある数が表示される
    - 表示をタップしたら下に落ちて、重い再描画が初めて走る

懸念
- ツールの切り替え時にpathBufferがフラッシュされるべきだが、そういうコードはどう書くべき？
    - →リファクタリングしてツールが切り替わる時に必ず呼ばれるコードを作った
- Undoが、パスを下に落としてからじゃないと発動しなくなるが、直感に反する
- パスを下に落とした後、Undoすると一つずつUndoされる。まとまってされたほうがよい？？

[[pRegroup-done-2020]]
