---
title: "Hatena2009-08-24"
---

hatena

```
<body>
*1251112946*締め切りドリブンについての考察
締め切りドリブンになるのは、習慣的にこつこつと作業する能力の低さが原因だと思っていた。がしかし、取捨選択能力の低さがより大きな原因なのではないか？
タスクに優先順位をつけた場合、優先度の高いタスクを実行中に優先度の低いタスクのことを気にしたり、優先度の低いタスクをやるのに必要な時間を残して高いタスクを切り上げたりしてはいけない。優先度をつけた意味がなくなってしまう。
ところが「タスクを捨てる能力」の低い人は往々にして、優先度が低いとわかっているタスクを捨てられず、タスクを溜め込んでいっぱいいっぱいになってしまう。

締め切りのメリットは「あれもしたい、これもしたい、でも間に合わないからあきらめる」という形でタスクが捨てられるところにある。
タスクを思いついたらすぐ着手してしまうようなスタイルではついつい重要ではない脇道に入ってしまうものだが、特に「締め切りまでに最低限あのバグをつぶして、パッケージ印刷して、CD-Rに100枚焼いて、etc.」とゴールが明確な場合には、「あ、こんな機能があると便利だな。でも今はそれどころじゃないからメモだけしておいて後でやろう」となる。


思いついたタスクを即座に実行せずに、いちいちリストに載せて優先度を考えてから実行するのはまどろっこしい。
ノリ乗りで思いついたタスクをどんどんこなして行く過程は、ゲームで次々現れる敵をばっさばっさと倒して行くのに似たスピード感がある。
しかしそれは「データをHDDに書き込むと遅いからやめよう、メモリに書けばいいじゃん」って言っているようなもの。
メモリに書くだけの方が速いのは事実だが、それは停電したら終わりだ。容量も少ない。人間の脳も同じで、中断すると忘れてしまうし、容量が少ない。

*1251115934*電子工作日記
暗めのカフェで作業がはかどったので、家も暗くしようと思った。今ついている照明は暗くつけることができないので新しい照明を買おうかなぁとヨドバシによってみたがあんまり琴線に触れるものがなかった。


帰ってきてとりあえず高輝度白色LED10個を点灯してみた。んー、これで十分な気がするなぁ。バイオライトはかなり熱くなるらしいし、でかい照明だとジャマだけども、これならジャマにならないし、5Vで動くし。


ハンダ付けするのはまだちょっと待っておく。マイコンで制御したくなったらダーリントンドライバとかつないだりする必要が出てきそうだし。


いま8.2の抵抗で5Vの電圧で動かしているので600mA。TD62783のデータシートを見たら定格出力電流は-500mA。現状で全部並列でハンダ付けしてしまうとダメだけど、半分ずつにしておけば後から変更できるか。


ひらめいた。グースネックケーブルを照明のアームにしよう！

*1251118341*最中限2.0開発日記
あと1週間で対戦ができるフレームワークにする

- ゴール: 
-- 人間が第三者または第三者の登録したAIと戦える
-- 管理者権限のない人がAIを登録できる
-- AI同士の勝負をマッチングできる

** 処理の流れ
自分が完全に忘れているので追うところから。
<hr>

start_gameする→HTMLなら/gameにリダイレクト
<hr>

>||
(r'^api/(?P<format>text|json|html)/start_game/$', 'start_game'),
||<

にurlタグで渡る方法がわからなかった(引数に'html'を指定してエラー)　APIがRESTっぽいことは最重要ではないので?format=htmlにした
<hr>
apiのビューはapi_views.pyにわけていた、忘れていた。viewsにstart_gameがないぞとか思った。urls.pyにちゃんと書いてあったのに。
<hr>
POST start_gameだったのだけどGETに変えた。リンクでスタートしたいし。新しくスタートしたゲームのIDを返す。
<hr>
>||
return HttpResponseRedirect(reverse(views.game, (game_id,)))
__import__() argument 1 must be string, not tuple
||<

reverseの使い方が正しくないのか。
■後で調べる
調べた
>||
reverse(viewname, urlconf=None, args=None, kwargs=None, current_app=None)
||<
argsをつける必要があった。あと最初[game_id]にしていてunhashableと怒られたのでタプルにしたのだけど、そもそも引数を間違えていただけだったのでこれでOK

>||
return HttpResponseRedirect(reverse(views.game, args=[game_id]))
||<

期待通りにリダイレクトされるようになった。
<hr>

http://localhost:8080/saichugen/api/start_game/?format=text
game_89e9e218f919a85cae33e8026fdd518bが返ってきた
期待通り
<hr>

手動でリダイレクトしてみた。'NoneType' object has no attribute 'played'

ゲームを作成してまだ誰も着席していない&カードも配られていない状態で配られたカードを表示しようとしているな。3人そろうまでは別の画面を出そう。

TemplateDoesNotExist at /saichugen/game/game_89e9e218f919a85cae33e8026fdd518b/
saichugen/gam_waiting_participants.html
想定された挙動。まだテンプレート作ってないからね。

<hr>
add computer players
- □ addできるコンピュータプレイヤーの一覧
-- どうする？
-- 全体からplayerの一覧を取得してpassiveなものを選択する？
--- このとき最後にいつenabled/disabledを返したかを表示
- ■ 自分のjoinできるプレイヤーの一覧
<hr>
あれ、Model.objects.all()じゃなくてModel.all()だっけ。

<hr>
-Playerのtypeってどういう値だっけ
-- なんでmodels.pyのPlayerクラスのドキュメントに書いてないんだよ自分爆発しろ

<hr>
バッテリーがなくなるまであと2時間。
ぷち締め切りまでにやるべきことは何か。

- AIを混ぜた勝負はテストが面倒なのでまずは対人戦ができるようにして自分で操作して最後まで流れテスト
- 2時間ではできない気がするが
-- ■ 別のプレイヤーがjoinできるかテスト
-- ■ 3人そろったときにゲームを開始

<hr>
joinのAPIはこういう設計にしていたけど
>||
(r'^api/(?P<format>text|json|html)/join/(?P<game_id>.*)/(?P<player_id>.*)/$', 'join'),
||<
とりあえず
>||
(r'^api/html/join/$', 'join_html'),
||<
を追加してフォームからのPOSTを受け付けるようにする。これがapi/以下にあって、api_views.pyの中で定義されるRATIONALEはviews.pyが全般的な表示のためのビューでapi_views.pyがAPIのためのビューであるならプレイヤーを参加させて表示用のURLにリダイレクトするだけのビューはapi_views.pyにいれるべきだから

リストを表示して選択させるフォームの書き方がわからん。電波がないので後で調べる。

□ リストからプレイヤーを選択できるようにする

とりあえず決め打ちにして先に進む
<hr>
2人が着席中に2人いることが見えるようになった。3人目を着席させると3人そろった後の画面が出るようになった。
カードが配られているのが見えてほしいけど見えていない
templatetagsで実装したはずだ

カードが配られていないな。

いや、カードは配られていて{{ game.seat_set.0 }}で特定のシートを確認するとちゃんと配られているが
{{ game.get_played }}では配られていないように見える。

いや、これで正しい挙動か。playedはプレイヤーが場に出したカードであってゲームの最初には空っぽで正しい。

この勘違いを再発させないためには何が必要なのか？

思いつかないのでスルー。
<hr>
とりあえず決めうちで座席へのリンクを張った
□ 3人分にする

The view saichugen.views.seat didn't return an HttpResponse object.
想像通り未実装だった。
えーと、プレイ中画面で表示されるべきものは…これはversion 1.0を参考にすればいいか。
<hr>
seat.handの表示完了
□ リンクを張ってクリックしてカードを出せるようにする
□ カードの間隔が決めうちで30pxなのをくくりだす
<hr>

次は何ができないといけないか。
□ カードをクリックしたらそのカードを伏せて出す
□ 現在伏せられているカードの存在が表示されるべき
□ 3枚伏せられたらターンを進める

18:30か。おなかがすいてきたな。コミットログによれば17:02に「ゲームがまだ始まっていないときの画面」のテンプレートをコミットしているからもうそれから1:30経っているのだけどバッテリーはまだ1:50残っていて、コミットより前の作業を開始した時点でのバッテリー残量は2:30だった。ふうむ、MacBookはバッテリーを少なめに申告するのか？食事をしてからもう1～2時間作業できるなぁ。

<hr>
今日のところは、明日するべきことをリストアップして終わりにしよう。
きれいさっぱり構造とかどこまでできているかを忘れている状態だったのでスタートに手間取ったが、明日はもうちょっと生産的に活動できるだろう、そう期待したい。

- game
--□ リストからjoinするプレイヤーを選択できるようにする
--- select, option
--□ とりあえず決めうちで座席へのリンクを張った,3人分にする
- seat
--□ seat.handの表示からリンクを張ってクリックしてカードを出せるようにする
---□ カードをクリックしたらそのカードを伏せて出す
---□ 現在伏せられているカードの存在が表示されるべき
---□ 3枚伏せられたらターンを進める
--□ (重要でない)カードの間隔が決めうちで30pxなのをくくりだす
</body>
```


[はてなダイアリー 2009-08-24](https://nishiohirokazu.hatenadiary.org/archive/2009/08/24)