---
title: "✅エンパシーライティングモードを作る"
---

Keicho-Regroupの使い方の解説として[[🤔文章を作るチュートリアル]]を作ることを考えた

今のままのKeichoでやるのではなく、[[エンパシーライティング]]に特化したモードをつけた方が良い
- 自由度や質問の多様性が落ちるが、不慣れなユーザが迷子になりにくいから

これを実現するための設計変更は、前からやりたかった[[🤔タスク管理チャットボット]]の実験にも有益そう。[[テンプレートのチャットボット化]]も容易。

やりたいこと
- [[文章作成に特化した10の質問]]をする
- 質問をただ立て続けに出すだけは良くない
    - 質問への反応をボットが返す必要がある
    - そうなると、どのタイミングで次の質問へ進むのか
    - 自動で進んでもいいが、話が盛り上がるとなかなか次にいかない
    - ユーザが「次の質問」とトリガーを引けるべき
    - つまり[[✅コマンド処理を追加可能にする]]必要がある
    - そしてその追加されたコマンドをボタンに表示したい(不慣れなユーザにコマンドを覚えろと言うのは酷だから)
        - [[✅回答選択肢をサーバサイドで作る]]
- 質問が一通り終わったらRegroupにエクスポートして、付箋を動かして整理する

実装が必要なもの
- [[✅クライアントサイドでの最初の質問の変更]]
- 特化モードに入る方法
    - ✅URLにモードの情報を積む
        - `#mode=empathy_writing`
    - [[🤔モードの変更をメニューにつける？]]
- [[✅モードによるサーバサイド初期状態の変更]]
- [[✅エンパシーライティング用の質問とアクションを実装]]
- エンパシーライティングモードの終わりのデザイン
    - Regroupにエクスポートするか、もう少し会話を続けるか
    - エクスポートした上で会話も続ける？
        - 二画面は慣れた人にはアリだけど初心者向けではない
        - 一旦終わってエクスポートする
    - エクスポートを進めるメッセージを入れておく
        - "十分掘り下げられたのでメニューから「Export for Regroup」をしましょう"
        - おっと、今の画面だとこのメニューは会話モードにはついてないぞ
        - ✅つけた

- 試した
    - [[今日作ったエンパシーライティングモードがどういうものか読者に伝わるといい]]
    - [[Regroupで整理する:エンパシーライティングモード解説]]

- [[🤔httpだとクリップボードが使えない？]]
- 最後のメッセージでサーバエラーが起きる
    - ✅修正した
- その手前部分はダレるので調整が必要
    - スコアを確認すると500を下回ったあたりでダレてきている
    - Q10の直後で552
    - 質問対象のキーワードとしては200以上くらいが良い
    - 引数を取らない質問でのスコアはデフォルトで50

やること
- [[✅エンパシーライティングモードにおいて「次の質問」ボタンを表示する]]
- [[✅自由回答をオンオフする]]
- 引数を取らない質問のスコアを上げる
    - スコアの観察
        - 基本的に直前発言のスコア100のキーワードに直前ボーナス200がついて自然度100と質問選好バイアス0.4がついて400.4
        - 引数を取らない質問のスコアは基本50+自然度50で100になる
    - [[✅「次の質問」コマンドをNG扱いする]]
    - [[✅特化モードのスコア計算]]
- ✅Regroupのマップ作成時に質問付箋を作る
    - 「ポジティブなセリフ」みたいな付箋があった方がやりやすいので

追加
- [[最初の質問はログのタイトルに入ることを想定して作るべき]]
- > 文章作成を支援するモードです。どんな文章を書こうとしていますか？
    - 他のモードと揃えた

- KPTモードの実装の際に洗練された記述方法を使うようにかえた
    - ![image](https://gyazo.com/de03afb689b1c0eb35de36f4da07c600/thumb/1000)

