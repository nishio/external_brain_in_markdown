
from [[Kozaneba開発日記2021-08-31]]
2021-09-01Kozaneba開発日記

タイトルのついてるグループをUngroupした時、タイトルがこざねになるが、それをもう一度グループにしたい場合の操作が直感的でない
例えばタイトルはタイトルのついた空のグループになるなら、外に出た要素を選択してもう一度中に入れれば元に戻る
- これは空のグループでも小さく潰れないようにしたからできるようになった

問題は「グループの中身を出して空にする(グループ自体は残る)機能」はUngroupって名前が適切ではなさそうなところ

タイトルのないグループにこの機能を使うと空のグループと中身になる
空のグループの自動削除が入ると、今のUngroupと全く同じ挙動になる

いまのUngroupでもタイトルがついてるグループだけこざねを追加する特別処理をしているので、その特別処理を変えるのが良いか。タイトルのないグループの処理は変えずに。

![image](https://gyazo.com/efe3b7bec6ac66c20ed4cbc9e78f982d/thumb/1000)
`-349.98748446822736`
`2421.197029584663`

---
リリースノート
- 範囲選択中にグループの上でMouseUpした場合にクラッシュするバグを修正

---
最終保存日時見たい
削除やグループの移動、保存されてる？確認
画面の平行移動、更新タイミング？

リリースノート
- 選択範囲をコピーできる(copy JSON)
- それを貼り付けられる
    - このJSON貼り付けはAPIとして露出してあるので、ユーザはテンプレート的なオブジェクトをカスタムメニューから作成することができる
- 最終保存時刻をStatusBarから確認できる
- グループとこざねの削除で保存がトリガーされなかったバグを修正
- Nキーでズームアウト

キーバインドの変更追加
矢印
- キラー応用
    - ソースコードの依存関係

画像のバウンディングボックスがおかしい
- 選択の時におかしい
- ロード時に画像を読むまでサイズがわからない、保存すべき

![image](https://scrapbox.io/files/612f3dbca9bf940023907e92.png)
[[Kozanebaの次の進む方向についてわかると良い]]
![image](https://gyazo.com/ed1b782cc5f75ac38432b464fe1c3b70/thumb/1000)

枝は伸ばした方がいい
- タッチ対応の現状
    - クリックしてメニューを出し開閉することはできる
    - 移動はできない
    - 二本指ピンチで拡大縮小はできるがブラウザ機能で拡大されてる、そして拡大上限がある
- 矢印
    - SVGでlineを作ればline部分だけの当たり判定にはできる
    - 末端の位置をどう決定するか
        - 「矢印への矢印」などを一旦無視するなら、対象オブジェクトの座標を取得すれば良い
        - 矢印への矢印
            - これも依存関係がツリーであるなら問題ない
            - 依存関係が循環させられるのがヤバい
    - 重ね順
        - 最前面にするか、すべての要素にz-indexをつけてMath.max
- 矢印機能、重ね順に対する強すぎる理想像を一旦脇におくと、矢印を別レイヤーにして上にSVGを1つ被せるのがまあ楽だよなと思った

リリースノート
- グループの中にあるグループをungroupした時にクラッシュするバグを修正

[[Kozaneba開発日記2021-09-02]]