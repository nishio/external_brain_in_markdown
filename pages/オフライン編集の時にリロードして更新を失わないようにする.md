
from [[pRegroup2020]]
オフライン編集の時にリロードして更新を失わないようにする
- オフライン状態/未保存の編集がある状態の表示
    - 普通のことは目立たなくて良い
        - 保存中スピナー
        - 保存完了マーク
    - 普通でないことが目立つべき
        - オフラインモード
        - 保存に失敗した=未保存の変更がローカルにある
            - 未保存の変更を見られるとなおいいが...

- 出来事
    - オフラインで編集できる(オンラインに戻った時にサーバに保存される)
    - オフラインで色々編集していく
    - 描画のバグで消えない付箋が残ってしまった
    - 無意識にブラウザをリロード
    - あっ
- [[未保存の変更がある場合に「失う可能性があります」アラート]]を出すべき
- ブラウザのクラッシュなどに備えてlocalStorageに最新状態を保存すべき
    - オフラインで編集してあとでネットに繋ごうと思ってたら電源が切れるかもしれない
- 次回ロード時にサーバ上のデータとローカルのデータを比較して「ローカルの方が新しいがどちらを採用するか」とダイアログで聞くべき