---
title: "Hatena2010-01-07"
---

hatena

```
<body>
*1262833551*[cpp]浮動小数点数が0かどうか
たとえば 1 / x をするときに x == 0.0 だと困るな、と if(x == 0.0) return ... なんて書いたときに、-Wfloat-equalを付けているからだと思うんだけど「warning: comparing floating point with == or != is unsafe」という警告が出るので、 abs(x) < EPSILON の形に書き換えないといけないのかな、EPSILONはいくらにすればいいんだろう、などと考えていたのだけども。

>>
methane 
@nishio fpclassify(x) == FP_ZERO とか
<<
http://twitter.com/methane/status/7463715253

とりあえずこれを使うことにしたのでメモ。後でじっくり考える。

*1262835414*続: パーフェクトシャッフルは何回で元に戻るか
半年前に作った<a href='http://d.hatena.ne.jp/nishiohirokazu/20090623/1245759753'>パーフェクトシャッフルは何回で元に戻るか</a>の
<img src="http://gyazo.com/6b04259168d6876d4292df4e91dc8a82.png">
を円形にしたい。

<hr>

できた。
<img src="http://gyazo.com/600aa112c16d2bb7e326e720a28adc9c.png">

<hr>

30枚のカードに「半分に分けて互い違いに組み合わせる」というシャッフルを5回すると元の並びに戻る、という図。
<img src="http://gyazo.com/57ed73804e2ec9936ce5707d0069c9ef.png">

abcdefって6枚のカードがあったら、まず半分に分けて abc, def それから交互に組み合わせて daebfc にする、というシャッフルね。

シャッフルのたびに、1枚目は2枚目になり、2枚目は4枚目になり、4枚目は8枚目になり、8枚目は16枚目になり、16枚目は半分に分けたときに後半の1枚目なので次のシャッフルで1枚目に戻ってくる。5回。

3枚目は6枚目になり、6枚目は12枚目になり、12枚目は24枚目になり、24枚目は後半の9枚目だから17枚目になり、17枚目は後半の2枚目だから3枚目に戻ってくる。やはり5回。

他のカードに関しても同様に成り立つんだけども説明は省略。

<hr>

Q&A
>>
@atusi 綺麗過ぎる、これ2D？
@nishio 2D。C++で実装して2次元の配列にかきかきして、直接PNGで出力
<<

>>
@taichino 30枚と、周期が5というのを何らかの数式にマッピングしたという話ですか？うーん。でも色が何を示しているのかわからないす。
@nishio 30枚のカードに虹色に色を塗って、最初は虹色に並んでいる(X軸方向)のを1回シャッフルすると互い違いになって(反時計回りに1/5周の部分)それを5回繰り返すと元に戻る、って感じです。
@taichino なるほど、数式ありきではなくて、事象入りで、それを自然に美しく表現できる幾何模様を生成されたという認識でいいんですか。
@nishio はい、数式は曲線にするためにcosを使っている程度ですね。「シャッフルを繰り返すと戻る」って現象を表現しようとしてこうなりました
<<

*1262852355*今日のあるある
日付を書くときに200まで打ってからバックスペースで0を1個消す。

*1262854732*Facebookを使うメリット
なんか木之本桜からFriend Requestが来たんだけど！！！(笑)

<img src="http://gyazo.com/0b87a3394f1f90c2500c020b9466148c.png">

中の人誰だよ(笑)

<img src="http://gyazo.com/8e517ff556fd4fca33a95b8e053f335c.png">

中の人なにじんだよ！(笑)
</body>
<comments>
<comment>
<username>TOKOROTEN</username>
<body>hanyaanって返しておけばいいんじゃね？</body>
<timestamp>1262965032</timestamp>
</comment>
</comments>
```


[はてなダイアリー 2010-01-07](https://nishiohirokazu.hatenadiary.org/archive/2010/01/07)