
prev [[Kozaneba開発日記2023-01-25]]

2023-02-02
かなり破壊的な書き換えだけど、一応フォントサイズ自動調整をオフにしたらどうなるか観察することはできるようになった
- ![image](https://gyazo.com/98982a33a6751566c08afe60884e34a1/thumb/1000)

範囲選択や線を引いた場合の「バウンディングボックス」が実際の見た目と食い違うようになる
- ![image](https://gyazo.com/61564c7a5390c089bc7a3d5203e3294d/thumb/1000)
- これを解決しようと思うと実際のサイズをそれらのコードがDOMにアクセスして取得するか、レンダリングした時に取得しておくかが必要か


2023-02-03
概念に名前をつけないと言及しにくいから仮で「[[フォントサイズ固定機能]]」とした。
- これではユーザにとっての価値がわかりにくいのでいずれリネームする。

今後の作業
- フォントサイズ固定は、現状かなり破壊的な書き換えで実験してる
    - 元々のフォントサイズ調整機能を壊して実現してる
- これを、フィーチャートグルにできるか挑戦する
- できたなら、一旦「範囲選択や線の結合に問題が出るから一般向けにはOFFになってるけど上級者向けにはONにできる機能」にする

フォントサイズ自動調整と併存できた！
- ![image](https://gyazo.com/ce81250e9ac8d91c6ce5941a251ae181/thumb/1000)
フィーチャートグル
`kozaneba.constants.exp_no_adjust = true`
自動調整をオフにするかどうかのこざねごとのフラグは「先頭文字が#かどうか」

とりあえずこの状態で使ってみよう

![image](https://gyazo.com/653117636492ca9aa77c28242bd147d6/thumb/1000)
- バグです
- 直った
    - ![image](https://gyazo.com/64f73e37e119678b0d4ca3f31a62e520/thumb/1000)
    - まだリリースはしてません


考えたことメモ
- ユーザースクリプト、ブラウザのローカルストレージに保存していたので消えた
    - まあサンプルとして別に保存してるから損害はないんだけど、そういう挙動だとわかりにくいよね
    - ユーザと紐付けて保存することは技術的には可能、なんでやってないかというと、タッチパッドのあるMacbookとホイールマウスのWindowsみたいな「デバイスによって異なる設定にしたい」というニーズがあったから
    - とはいえ、マシンごとの設定切り分けはフラグだけでいいのでは感はある
    - 結局iPadでちゃんと動いてないので自分が試してないが、iPadや iPhoneからアクセスした時のことも
        - 例えば散歩しながらiPhoneで思いついたことを追加することだけやって、見ることはできるがマップの編集はしない的な感じで、帰ってからPCで整理するとか
- Scrapboxこざねの展開などで自動で追加される時に、重複しないかチェックしたら良いのでは
    - つまり一つ貼って展開をすればScrapboxの整理にすごくよいぞ！的な〜
- 来週、発表会があるので、これを使って情報整理をする


