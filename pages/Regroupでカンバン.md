
[[2020-02-04 Regroup+カンバン]]での着想を実際にやってみた

最終形
![image](https://gyazo.com/0757d474ff86fc5e3041da9bb56bd4bb/thumb/1000)
- [https://regroup.netlify.com/#/key=mKmQdr3m4oyOQJXH1uYw&cx=839&cy=2570&top=1448&left=-1610](https://regroup.netlify.com/#/key=mKmQdr3m4oyOQJXH1uYw&cx=839&cy=2570&top=1448&left=-1610)
- Regroup→カンバン、の最終形。
    - こうなってしまうと単なるカンバンにしか見えないので心踊らないな。
    - まとめていくプロセスが大事

流れ
2020-02-06
- 明日する開発についてスマホで思いついたことをメモしている
    - ![image](https://gyazo.com/70ba2d515847e7cf07e6b4374fc4d911/thumb/1000)
- 増えてくるとスマホでは流石に辛いが、多少は動かせなくもなくない
    - ![image](https://gyazo.com/f55879eaf1fb6e567e32408da9ff5c7e/thumb/1000)
- iPadで開くとこうなって
    - ![image](https://gyazo.com/ece19836a927eb6890c5fc0a2c37726b/thumb/1000)
- 整理するとこうなる
    - ![image](https://gyazo.com/8d5b090070ea42e6808e16ffa5f215fd/thumb/1000)
- グループ化したい
    - [[Regroupでのグループ化のデモ]]
    - こんな感じ
        - ![image](https://gyazo.com/e64a2ba37a56c40d127d6f2c08c9b2d6/thumb/1000)
    - 綺麗に整理できるのはごく一部

2020-02-10の考察
- Regroupからテキスト形式で書き出す手段が未実装だからRegroupに直接書き込んだアイデアがScrapboxに書き戻せてなくて「ポケット一つ原則」に反してるのがいけない気がしてきた。
- Regroupの方はまだ単体でポケット一つ原則を満たせる状況ではないのでScrapboxに書き戻したい
- →[[選択範囲のテキストをコピー]]

一応書き出されるが、[[読みやすい順番・箇条書き]]ではない

DONE
- [[表札のないグループ]]に閉じるバルーン追加
- グループに付箋が含まれない場合のサムネイル表示
- グループの背景をドラッグしたらグループ全体が動く
- グループの中の付箋をドラッグしたらその付箋だけが動くべき
- グループをクリックしたらグループ解除のメニューが出て欲しい
- グループ中の付箋やグループがマウスダウンされた時、そのままマウスアップならクリック扱い
- グループのクリックでグループが消える
- バルーンのクリックでゴーストがかぶる
- リンクでなくても開くメニューが出る
- 投げ縄選択時にバルーンメニューにグループ化を出す
- [[表札付けを強要しない]]
- ドラッグ開始された時、ドラッグ中の表示になるべき
- 自分の所属グループにドロップされたらただの位置の更新
- 投げ縄選択時にバルーンメニューにグループ化を出す
- 投げ縄モードでクリックをした時、通常のクリック同様にしたい
- 投げ縄で付箋の上にマウスダウンしたら、単独付箋のドラッグにしたい
- [[閉じたグループに表札がない時の表示]]

- [[マウスイベントの扱いの変更]]

TODO
- パスで文字を書いた時にバラバラになるより塊であって欲しい
    - ということでデフォルトでグループ化されていて、必要なら事後的に解除
    - この「グループ化されたパス」の表示はどうしたものか
        - 今の付箋の黄色は強すぎるかもしれない
        - やってみて違和感があった時に直せばいいか
        - 色を薄くしたり透明度を上げる案
        - →[[グループから枠線を取り去る]]

- 付箋のテキストをコピーしたい
    - 投げ縄してコピー、テキストとJSON
    - テキスト: [[選択範囲のテキストをコピー]]

- ペンでもクリックしたい

- 書きかけパスにUndo欲しい、ドラッグと間違えて線を書いてしまった

- 新規追加付箋の位置決め
    - 付箋の追加位置、リセットする方法がないな
    - しなくていいか？
        - ノートのようにずっと下に伸びていく
        - スケールすれば改行までに何枚出るかは変わる
        - それでいい気がする
    - →付箋の追加先が画面外だと見失う
        - 追加予定地が画面外なら左上にリセット
    - あとから移動する時に混ざり合ってると面倒
        - 他の付箋などと干渉するときもスキップしたい
        - インターセクションでの判定をかければよい

- ハッシュで区別してるとエアードロップの時に同一視される

- グループを開いた状態で表示すると畳んだのに嵩張る
    - 子供のグループを勝手に閉じてしまうと開く時に面倒
    - いまグループの描画の中で自分の開閉状態で描画を切り替えてるがinheritすべき
    - 実際のグループが開いていても閉じた描画をしてそれを表札に使うべき
    - 左上がグループであるグループのたたんだ時の表示
        - 左上がグループの場合どうなるのか
        - 今は消える

- キャンバスの描画完了前にダイアログが出ちゃうことがあって、付箋追加し損なったかな？と思ってしまった
    - キャンバスの再描画後のハンドラで出すように変更しよう

PENDING
- [[ドラッグ中にもヒットテストして、今離した時に何が起こるか表示すべき？]]
    - 具体的にはドロップを受け取るグループのハイライトなど

- [[ドロップ時にもヒットテストが必要？]]
    - グループの外にドロップしたらグループから出す
    - 別のグループにドロップしたらそこに移動する

- 閉じたグループはワンクリックで開くの変？

- モヤモヤマップとカンバン
    - 実装済みの付箋に色をつけられたらよい？
    - 複数ビューがあるとよいのかも
    - カンバンゾーン作って移動してみた
    - モヤモヤマップの中の付箋をカンバンにムーブするとモヤモヤが壊れる
    - リンクを保つか、複製するか
        - 複製しても「同じものがあっちにある」って気づけないといけないから結局リンクは必要
    - でもそれを一画面に表示してリンクしたものと等価か
    - 動画で遷移するとかっこいいけど見た目に過ぎない

- 追加した最も最新の付箋が同期されてこない？
    - promptがブロックしてることでレースコンディションを起こりやすくしている？

- 二本指ジェスチャで動かした時に正しい位置に更新されない
    - 一本指ドラッグ中に二本指ジェスチャーが始まると壊れる


---
- [[カンバン仕事術]]するといいかも
    - [[Regroupの開発をRegroup+Scrapboxでカンバン仕事術]]
    - という着想について書き出ししてからまとめてみた: [[2020-02-04 Regroup+カンバン]]
        - 実際にやってみて思ったこと
        - 現状で字を書くのには苦痛な遅延がある
            - [[パス描画の高速化]]で解決
        - 投げ縄での移動がゴーストでないのでもっさり
        - 投げ縄移動後にも遅延がある
        - パームの接触で激しい画面の移動が起こることがある
        - [[表札のないグループ]]化が手軽に使えないと「ちょっとどけといて」にいちいち囲むのが必要で不便
            - done
        - 投げ縄で付箋にマウスダウンしたら単体ドラッグ移動モード
            - done: [[投げ縄モードで付箋をマウスダウンした場合、付箋の移動であるべきでは]]

