
hatena

```
<body>
*1238562617*Python3.0でswitch文を作りました
エイプリルフールなので嘘みたいなことをやってみた。

>|python|
for x in range(5):
    print(x)
    MESSAGE = "The value is"

    class _(switch(x)):
        @case(0)
        def _():
            print(MESSAGE, "zero!")

        @case(1)
        def _():
            print(MESSAGE, "one!")

        @case(2)
        def _():
            print(MESSAGE, "twei!")

        @case_else
        def _():
            print(MESSAGE, "something else!!")
||<

MESSAGEはちゃんと外のスコープを見れていることを示すためにあえてclassの外に置いてみた。まあnested_scopes以降なら動いて当たり前なのだけど。

実行するとこうなる。
>||
0
The value is zero!
1
The value is one!
2
The value is twei!
3
The value is something else!!
4
The value is something else!!
||<

実装はこちら：
>|python|
def switch(val):
    case.cases = []
    case_else.func = lambda :None

    class SwitchMetaclass(type):
        def __init__(cls, name, bases, dct):
            if not case.cases: return
            for (v, func) in case.cases:
                if v == val:
                    func()
                    break
            else:
                case_else.func()
                

    class Switch(metaclass=SwitchMetaclass): pass
    return Switch

def case(x):
    def foo(f):
        case.cases.append((x, f))
    return foo

def case_else(f):
    case_else.func = f
||<

メタクラスのコンストラクタ__init__は、メタクラスのインスタンス(つまりクラス)がインスタンシエイトされるタイミングで呼ばれるので、デコレータで関数と値のマッピングを作っておいてそのタイミングでマッピングから順にマッチするものを探して実行するってだけ。

このまえid:moriyoshi に言われた「class Foo(lambda: ...)で何か実用的なことができないか」をやろうとしていたのだが、結局lambdaじゃないものになってしまった。

*1238588872*"Did You Know"和訳
この動画は一見の価値がある。英語にひるんで見ない人がいるともったいないので和訳した。(追記: これはバージョン3.0らしい。)

(追記:字幕付きのバージョンがニコニコ動画で公開されました)
[http://www.nicovideo.jp/watch/sm6631983:movie]
[http://www.youtube.com/watch?v=UIDLIwlzkgY:movie]

知っていましたか？

- もしあなたが中国で「100万人に1人の逸材」なら…
- あなたみたいな人が国内に1300人います。

- 中国はまもなく世界一英語が話されている国になります。

- インドの「IQが高い側から25%」は
- アメリカの全人口より多い。
- つまりアメリカに生まれる全ての子供よりインドに生まれる優等生の方が多い。

知っていましたか？

- 2010年に需要のある仕事上位10位は
- 2004年にはまだ存在していませんでした。

- 今私たちは学生を教えています。まだ存在しない仕事に備えて。
- まだ発明されていない技術を使って
- まだ知らない問題を解く仕事に備えて。

- 米国労働省は今の学生は10～14の仕事につくと推測しています
- 38歳までに。

- 4人に1人の労働者は、今の仕事についてから1年未満です
- 2人に1人は5年未満です

知っていましたか？

- 昨年アメリカで結婚したカップル8組につき1組はオンラインで出会いました
- MySpaceの登録者数は2億人以上です。
- もしMySpaceが国なら、世界で5番目に大きな国です。(インドネシアとブラジルの間)
- ブロードバンドの普及率が最も高いのは
- バミューダ諸島です。
- アメリカは19位
- 日本は22位

知っていましたか？

わたしたちは指数的に成長する時代に生きています。

- Googleでは毎月310億件の検索がなされています。
- 2006年には27億件でした。
- いったい誰にこれだけの質問がされていたのでしょう？Google登場前は。

- 研究以外で初めてのテキストメッセージが送られたのは1992年の12月
- 現在、毎日送受信されているテキストメッセージは地球の総人口より多い

(訳注: SMSが1992/12に初めて送られたことを指している http://en.wikipedia.org/wiki/Short_message_service)

- 5000万人の視聴者を獲得するまでにかかった年数
- ラジオ 38年
- テレビ 13年
- インターネット 4年
- iPod 3年
- Facebook 2年

- 1984年にインターネットに接続されていた機器は1000件
- 1992年には1000,000件
- 2008年には1000,000,000件

- 英語の単語は約54万語
- これはシェークスピアの時代の約5倍

- 1週間分のNew York Timesに含まれる情報は18世紀の人が生涯に出会う情報より多いと推定されている

- 4エクサバイト(4.0 x 10^18)のオリジナルな情報が今年作られる、と推定されている
- これは過去5000年の合計より多い

- 技術情報は2年で2倍に増える
- いま4年間の大学生活を始めた学生にとって、これは
- 1年生のときに習ったことの半分は、3年生のときまでに陳腐化するということだ

- NTT日本は光ファイバーの実験に成功した
- 1房のファイバーで秒間14兆ビットの情報を送る実験に。
- これはCD2660枚分や電話21億回分の情報を1秒で送れるということだ。
- 回線速度は6ヶ月で3倍になっており、今後20年もその傾向が続くと期待されている
- 2013年までに、人間の脳よりも計算能力の高いスーパーコンピューターが作られるだろう
- 2049年までに1000ドルのコンピューターが全人類を足し合わせたよりも高い計算能力を持つようになるだろう

知っていましたか？

- この動画を見ている間に
- アメリカで67人の子供が生まれ
- 中国で274人の子供が生まれ
- インドで395人の子供が生まれている
- そして694,000本の曲が不法にダウンロードされている

これってどういうことだろう？

<hr>
追記：このエントリーを読んで焦燥感を感じた人にはこちらもオススメです：<a href='http://d.hatena.ne.jp/nishiohirokazu/20120902/1346576549'>考えない練習</a>

*1238589956*エイプリルフール
大学の帰りに北千里の駅前で雷が落ちているのを拾ったんだけど、これって警察に届けた方がいいですか？

*1238595595*頭の調子が悪い
うーむ。
おつむのちょうしがわるいよう。


集中力の持続時間がとても短いので、長時間の集中が必要な作業が全然うまく行かない。今朝のメタクラスをいじって変なことするコードは15分程度。まあ、アクセルを踏んだときに、今までだったら「ぷすん」って言うだけで全然エンジンが回らなかったのが、一応回るようにはなったんかな。走り出して15分位するとラジエータが過熱で警告音を鳴らし始めるみたいな。


そんなこんなで手元に紙を広げてグラフを書いて考えようと思ったはずなのになぜかTwitterに「SFが書けるようになるには何を学べばいいだろう」とか書いてたり、英語の動画を翻訳していたりする。むう。


ちゃんとタスクリストに戻って順番につぶして行けばいいのか。って紙にグラフを書いている今の作業自体がタスクリストに載ってない！脱線じゃん！！


そうそう。あちこちに書類がとっちらかっているのをなんとかしようと思ったんだった。

- □ 書類を一時的に入れておく場所を作る
-- 郵便から取ってきた処理すべき書類入れ
-- 後で必要になる重要な書類を保管しておく場所
--- チケットなど(当日忘れずに持って行く必要がある)
--- 医療費・領収書など(来年の確定申告に必要になるかも)
-- 期限のある処理すべき書類
-- 期限のある金券(食事の割引券とか)
-- 刻む必要のある書類入れ(住所などの書かれているもの)
-- いらない書類(ゴミ箱へ)

とりあえず、未処理の書類を入れるところと「後で必要になる書類」を入れるところを作ろう。作った。とりあえず机の上とかに散らばっていたものを全部そこに入れた。ふー。

収納した書類は期限を語らない。だから収納してしまうとうっかり処理し忘れたりする。
それを防ぐ方法は、やはり処理期限はデッドラインなのだから「予定表に書く」だろう。

- 一時的な書類入れ(まだ処理していないもの、新しい郵便: Inbox)
- 後で必要になるまで保管する場所
-- チケットなど(特定日まで)
-- 医療費・領収書(確定申告まで)
-- 機械の保証書・領収書(保証の期限が切れるまで)
-- 機械の操作説明書(機械が廃棄されるまで)
- 期限までに処理すべきもの(スケジュールに書くこと！)
-- 期限までに処理すべき書類
-- 期限のある金券、食事割引券
- 廃棄すべきもの
-- 刻む必要のあるもの(住所の書かれているものなど)
-- そうでないもの(すぐゴミ箱へ！)

「書類がない！」と騒ぐ人に「きちんと保管しなさい」とアドバイスするのは簡単だけど、実際問題として「書類がない！」って言っている人の結構な割合は「書類はどこかに保管してあるんだけど見つけられない」なのだと思う。うん、僕はプラスチックのコンテナに3杯分の書類があるんだけど、5年前の領収書とかもういらないよね。A4クラフト封筒もたくさんあるから、一度棚卸しをしよう。書類を出して、保管すべきものは封筒に入れて、そうでないものは捨てる箱に入れる。

*1238605664*Re: 嘆息していてもなんだし
<a href='http://d.hatena.ne.jp/finalvent/20090323/1237767824'>嘆息していてもなんだし - finalventの日記</a>

「『栄養が偏ると怒りっぽくなるなど精神に変調をきたす事が知られています』は言い過ぎだろ」とか「『知られています』というならソースを示せ」という主張には100%諸手を上げて賛成するんですけどね。精神的に不調な人の心のよりどころを否定することにいったい何のメリットがあるのかな。あまり合理的な行動であるように思えない。

たとえて言うならば年始に北野天満宮に行って「天満宮にお参りすることで合格の確率が変わるわけないじゃん。本気で信じてるの？馬鹿じゃないの？」と叫ぶみたいなもんで。理屈の上では正しいんですけどねぇ。そう叫ぶことでいったい誰が得をするのか。
</body>
<comments>
<comment>
<username>kybernetes</username>
<body>"Did You Know"には複数のバージョンがあるようなので、これが3.0であることを明記すると良いと思います。</body>
<timestamp>1238594011</timestamp>
</comment>
<comment>
<username>m</username>
<body>2.0はニコニコ<br>http://www.nicovideo.jp/watch/sm1232676<br>にあるね。<br><br>3.0も誰か作ってくれないかな？</body>
<timestamp>1238644559</timestamp>
</comment>
<comment>
<username>nishiohirokazu</username>
<body>この翻訳文に関して著作権は主張しないことにするのでどうぞ自由に作ってください > ニコニコ</body>
<timestamp>1238645153</timestamp>
</comment>
<comment>
<username>vdna</username>
<body>おもしろいですね。ちょっと気になった訳が2か所。<br>1.「まだ存在しない仕事について」は、preparing なので<br>「まだ存在しない仕事に備えて」などのニュアンスですね。<br>具体的に（「～について」）教えることができているという話ではなく、<br>それ（未知の仕事）に適応できるはずと思い込んで、という感じ。<br>「まだ存在しない仕事について教えられるはずがないのに」<br>というニュアンス（未来のことを知らないまま、過去を頼りに行動している）<br>が背景にあると思います。<br>2.「まだ発明されていない技術を使って」は、haven't beenなので<br>「昨日までは存在していなかった」などの言い回しが適切かと思います。<br>現時点で存在していない技術は使えないので。</body>
<timestamp>1238672301</timestamp>
</comment>
<comment>
<username>nishiohirokazu</username>
<body>なるほど。preparingのニュアンスは確かに「～に備えて」で表現できますね。修正します。<br>2番目の点に関しては文脈上「現時点で存在していない技術」を指していると解釈するのが妥当かと思います。haven't beenも「現時点でまだ存在していない」ということを言っているわけなので。</body>
<timestamp>1238688504</timestamp>
</comment>
<comment>
<username>とおりすがり</username>
<body>ネガティブな意見で申し訳ないのですが、特に価値があるとは思いませんでした。ま、人それぞれですけどね。<br>最後の What does it all mean ? この問いかけに対する自分の回答としては、It doesn't mean anything ! 。単なる長い歴史の中で現在の部分だけを見たって感じですね。　例えば100年前に同じような問いかけがあったとして、100年後の今って別になにか・・・って感じると思いますし。人類が滅亡する何かがあるわけでもないしね。</body>
<timestamp>1238692555</timestamp>
</comment>
<comment>
<username>nishiohirokazu</username>
<body>>特に価値があるとは思いませんでした。ま、人それぞれですけどね。<br><br>あなたの陳腐で非生産的なコメントに比べればよっぽど見る価値があると思いますけどね。ま、人それぞれですけど。</body>
<timestamp>1238713909</timestamp>
</comment>
<comment>
<username>blackbird</username>
<body>興味深いものを紹介していただきありがとうございます。<br>もっと広めたくなったのでお言葉に甘え<br>日本語訳版を作ってニコニコ動画にあげました。<br>http://www.nicovideo.jp/watch/sm6631983</body>
<timestamp>1238715768</timestamp>
</comment>
<comment>
<username>kochi</username>
<body>これってスクリーンセーバーに加工できないものかねえ。</body>
<timestamp>1238725985</timestamp>
</comment>
<comment>
<username>yorihito_tanaka</username>
<body>感動しました!</body>
<timestamp>1238731944</timestamp>
</comment>
<comment>
<username>userinjapan</username>
<body>「世界がもし100人の村だったら」でしたっけ？あれと同じような「面白さ」はありますね。<br>統計上の根拠を確かめるのが大変ですが。</body>
<timestamp>1238747902</timestamp>
</comment>
<comment>
<username>就職活動中</username>
<body>かつてないパラダイムの転換の渦中にいるんですね。<br>考えてみると5年前と今とでは環境が大きく変わりましたね。それも生活の中で実感できるくらいの大きな変化。<br>5年前の僕が同じように５年前を思い返しても、今ほどのショックは受けていないでしょう。<br><br>就活中の学生としては<br>＞＞米国労働省は今の学生は10～14の仕事につくと推測しています<br>＞＞38歳までに。<br>＞＞4人に1人の労働者は、今の仕事についてから1年未満です<br>＞＞2人に1人は5年未満です<br><br>これらなんかが気になりましたね。</body>
<timestamp>1238766735</timestamp>
</comment>
<comment>
<username>ちゃねらー</username>
<body>最初と最後に人口問題を持ってきたね。中国とインドでの人口増加は、優秀な人間も同じように爆発的に増えている<br>ということ。それはつまり、将来における圧倒的なマンパワーとして世界を席巻する可能性を秘めている。<br>お前ら（米国の学生）はこれをどう思うんだね？<br>何か対処法がないかね？という問いかけのような気がしますね。<br>アメリカを中心に植物の種子を保存しているらしいし、未来における大きな切り札になるのは間違いない。<br>遺伝子組み換え作物の独占も有力なカードだね。<br>ウィルス拡散による人口削減計画も実しやかに囁かれているし。<br>こりゃ、問いかけられた学生の中から実際にこういう人口削減政策の道に進む奴が出てくるね。<br>OG！</body>
<timestamp>1255686730</timestamp>
</comment>
<comment>
<username>たくお</username>
<body>＞日本人は２２人<br>なぜに日本を取り上げる！？　ワロタw<br><br>＞これは過去5000年の合計より多い<br>＞2049年までに1000ドルのコンピューターが全人類を・・・<br>何を根拠に語ってるんだ？<br><br>＞もしMySpaceが国なら、世界で5番目に大きな国です。<br>＞現在、毎日送受信されているテキストメッセージは地球の総人口より多い<br>激しくどうでもよい事です。で？って言う</body>
<timestamp>1270881006</timestamp>
</comment>
<comment>
<username>カプチーノ</username>
<body>この記事を読んでゾクゾクしました。「わたしたちは指数的に成長する時代に生きています」、この言葉を胸に刻んで生きていこうと思います。<br><br>「4エクサバイト(4.0 x 10^19)」とありますが、「１エクサバイト=10^18バイト」ではないでしょうか？</body>
<timestamp>1283583777</timestamp>
</comment>
<comment>
<username>nishiohirokazu</username>
<body>おお、誤植ですね。修正しました。ご指摘ありがとうございます。</body>
<timestamp>1283645205</timestamp>
</comment>
<comment>
<username>hajime_create</username>
<body>生き物が飯を食って糞をすることに変わりはありません。</body>
<timestamp>1346987182</timestamp>
</comment>
<comment>
<username>nishiohirokazu</username>
<body>そうですね。</body>
<timestamp>1346988817</timestamp>
</comment>
<comment>
<username>kbzoffice</username>
<body>こういうののデータの出所ってどういうところなんですか？<br>（…スミマセン、自分で調べる前に尋ねてます）</body>
<timestamp>1347012619</timestamp>
</comment>
<comment>
<username>とおりすがり</username>
<body>こういうの、面白くて好きです！ 他に、こういうのご存じないですか？ 興味あります！</body>
<timestamp>1347026671</timestamp>
</comment>
<comment>
<username>Reply</username>
<body>「1週間分のNew York Timesに含まれる情報は18世紀の人が生涯に出会う情報より多いと推定されている」。これはもう30年位前から言われてますね。昔、年配のプランナーの方が言ってました。</body>
<timestamp>1347045649</timestamp>
</comment>
</comments>
```


[はてなダイアリー 2009-04-01](https://nishiohirokazu.hatenadiary.org/archive/2009/04/01)