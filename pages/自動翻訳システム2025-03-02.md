---
title: "自動翻訳システム2025-03-02"
---

- いつから止まってるのかわからない自動翻訳システムを修理する
- 前回どこまで作業したのやら...
- 名前がついてないせいで見つけられないのがダメなのでは
- 見つけようとして検索した時に他の仕掛かりタスクが目に入って気が散ってしまう
    - [[外部脳GitHub作業]](A)
        - そもそもCosense→GitHub(Markdown)ができてればRoo CodeやDevinがすんなり読めるのでは
            - Cosense上で検索しないでもlocalでgrepする
        - これは脇道なので保留
- [[etude-github-actions]]
- [[日記2025-01-09]]
    - > ローカルにも変更がある、これなんだっけな...
- とりあえずこれを確認するか
- ![image](https://gyazo.com/e46fa4514beb436903ebc6501bd05271/thumb/1000)
    - コミットしてからScapboxにImportしようとしてエラーになっているので最新の翻訳結果はある
        - この日本語版と英訳版をとりあえずGitHubに入れるのは手だな→(A)
            - これは脇道なので保留
    - 何度か発生している「なぜかimportでエラーになる」問題か
- ![image](https://gyazo.com/85130a94d34679a90dac48570dd10b70/thumb/1000)
    - Devinのやりかけタスク、レビューされないまま忘れ去れてる

- 少し気が散ってた
    - [[llm経由の議論#67c3f522aff09e0000edf142]]

- ![image](https://gyazo.com/972d432d35972194740045b704e4b1b2/thumb/1000)
    - そもそも68ページ程度のインポートでエラーになってるな

- (A)のことを考えても「なんかもう[[Scrapboxにimportするの辞めた方がいいんじゃないの]]」だな
    - [[2024-11-17外部脳考える]]
        - 大体全部書いてあるじゃん
        - > /nishio-enはこのままだと更新されないし、GitHub Pagesで動くようになったら「こちらをみてね」的ページをピン留めして終了
        - この方針でいいと思う

- そのあとQuartzで何かやった記憶があるけど
    - [[Cosense英訳のホスティング2024-11-24]]
        - これか
    - [[機械翻訳したScrapboxをQuartzで公開2024-11-24]]
        - Quartzで公開するところまではできたが微妙だった
    - リポジトリはnishio/from_scrapbox
    - 部品としてのQuartzはnishio/quartzに本家からforkしてある
        - カスタマイズする可能性があるからね
    - ビルド結果はnishio/quartzではなくnishio/quartz_deployにいれた
    - 英訳バージョンがGitHub Pagesでデプロイされている状況までは実現できているが、Quartzによるバックリンクの表示などに不可解な点があり、Quartzをデバッグするのか、そんな微妙なものは捨ててしまった方がいいのでは、という大きめの意思決定で止まっている

今日の残り時間が少なくなってきた
- 当初の課題である「自動英訳が壊れている問題」に関しては、自動英訳は壊れておらずJSONのインポートが止まってる状況
    - これを直すことにエフォートを割かない
    - 内部APIを前提としてシステムを組むのはそもそも筋が悪いので
    - 最新のものを手動インポートする
    - 将来的に自動化された移行先ができたら「移行先はこちら」とリンクして停止する流れ
- JSONからMarkdownにしてQuartzで静的HTMLにしてGitHub Pagesで配信する案について
    - できているが、Quartzの出すHTMLが微妙
    - (A)の観点から、Markdownの段階でGitHubに置かれるだけで有用性がある

[[GitHub Actionsで他のrepoにpush]]

できた
- [https://github.com/nishio/from_scrapbox/actions/runs/13614264620](https://github.com/nishio/from_scrapbox/actions/runs/13614264620)
- 確認したらできてなかった
    - エラーになった時にそのまま続行してしまってるのだな
- こんどこそできた
    - [https://github.com/nishio/from_scrapbox/actions/runs/13615083590](https://github.com/nishio/from_scrapbox/actions/runs/13615083590)
- ちゃんとMarkdownになってGitHubに入っている
    - [https://github.com/nishio/external_brain_in_markdown/blob/main/pages/自動翻訳システム2025-03-02.md](https://github.com/nishio/external_brain_in_markdown/blob/main/pages/自動翻訳システム2025-03-02.md)

まとめ
- [[Cosenseの更新が毎日Markdownに変換されてGitHubに入る]]ようになった


さっそくDevinに読ませている
- ![image](https://gyazo.com/e9c6e1d55ddfd1de1847663c2ce69448/thumb/1000)
- キーワードを与えてそれについてCosenseを読みまくってまとめることが出来てそうな雰囲気
- 結果 [[西尾泰和氏のScrapbox翻訳システムの進化と思想の変遷]]


importの方は手動でimportしようとしてみたら
![image](https://gyazo.com/1ad374cbe6fabd554668045fa776240f/thumb/1000)
これがエラーの原因なのでは？

雑に修正スクリプトを実装させる
![image](https://gyazo.com/916d125f50269dd4abfa983373521fa0/thumb/1000)
直した

![image](https://gyazo.com/f5d7c9b05c423bfb1e3cc8efc815097b/thumb/1000)
ファイルのコピーもできるようになったんだ
- private projectからpublic projectに移植する時に便利かも？

メモ:
- 同一タイトルをマージするプログラムを作った
    - [https://github.com/nishio/etude-github-actions/blob/main/merge_same_title_page.py](https://github.com/nishio/etude-github-actions/blob/main/merge_same_title_page.py)
- [[翻訳過程で同一の文字列に訳される]]んだろうな〜
- これを走らせてからdiffをするなら問題なくimportできるのか？
    - 逆に言えば今までは同一タイトルのものが上書きされてしまっていたということ


